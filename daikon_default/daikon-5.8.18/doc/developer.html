<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head><link rel="icon" href="daikon-favicon.png" type="image/png"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>The Daikon Invariant Detector Developer Manual</title>

<meta name="description" content="The Daikon Invariant Detector Developer Manual">
<meta name="keywords" content="The Daikon Invariant Detector Developer Manual">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="#Top" rel="start" title="Top">
<link href="#General-Index" rel="index" title="General Index">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<h1 class="settitle" align="center">The Daikon Invariant Detector Developer Manual</h1>










<img src="images/daikon-logo.png" alt="images/daikon-logo">


<span id="Top"></span><div class="header">
<p>
Next: <a href="#Introduction" accesskey="n" rel="next">Introduction</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Daikon-Invariant-Detector-Developer-Manual"></span><h1 class="top">Daikon Invariant Detector Developer Manual</h1>

<p>This is the developer manual for the Daikon invariant detector.
It describes Daikon version 5.8.18, released June 23, 2023.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Introduction" accesskey="1">Introduction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Extending-Daikon" accesskey="2">Extending Daikon</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Debugging-Daikon" accesskey="3">Debugging Daikon</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Daikon-internals" accesskey="4">Daikon internals</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Testing" accesskey="5">Testing</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Editing" accesskey="6">Editing</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Distribution" accesskey="7">Distribution</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Historical" accesskey="8">Historical</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#File-formats" accesskey="9">File formats</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#General-Index" rel="index">General Index</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

</pre></th></tr></table>

<span id="SEC_Contents"></span>
<h2 class="contents-heading">Table of Contents</h2>

<div class="contents">

<ul class="no-bullet">
  <li><a id="toc-Introduction-1" href="#Introduction">1 Introduction</a></li>
  <li><a id="toc-Extending-Daikon-1" href="#Extending-Daikon">2 Extending Daikon</a>
  <ul class="no-bullet">
    <li><a id="toc-Compiling-Daikon-1" href="#Compiling-Daikon">2.1 Compiling Daikon</a>
    <ul class="no-bullet">
      <li><a id="toc-Requirements-for-compiling-Daikon-1" href="#Requirements-for-compiling-Daikon">2.1.1 Requirements for compiling Daikon</a></li>
    </ul></li>
    <li><a id="toc-Source-code-_0028version-control-repository_0029-1" href="#Source-code-_0028version-control-repository_0029">2.2 Source code (version control repository)</a></li>
    <li><a id="toc-Using-Eclipse-1" href="#Using-Eclipse">2.3 Using Eclipse</a></li>
    <li><a id="toc-New-invariants-1" href="#New-invariants">2.4 New invariants</a></li>
    <li><a id="toc-New-derived-variables-1" href="#New-derived-variables">2.5 New derived variables</a></li>
    <li><a id="toc-New-formatting-for-invariants-1" href="#New-formatting-for-invariants">2.6 New formatting for invariants</a></li>
    <li><a id="toc-New-front-ends-1" href="#New-front-ends">2.7 New front ends</a>
    <ul class="no-bullet">
      <li><a id="toc-Example-instrumented-Java-program-1" href="#Example-instrumented-Java-program">2.7.1 Example instrumented Java program</a></li>
      <li><a id="toc-Instrumenting-C-programs-1" href="#Instrumenting-C-programs">2.7.2 Instrumenting C programs</a></li>
    </ul></li>
    <li><a id="toc-New-suppressors-1" href="#New-suppressors">2.8 New suppressors</a></li>
    <li><a id="toc-Reading-dtrace-files-1" href="#Reading-dtrace-files">2.9 Reading dtrace files</a></li>
    <li><a id="toc-System_002eexit-1" href="#System_002eexit">2.10 System.exit</a></li>
  </ul></li>
  <li><a id="toc-Debugging-Daikon-1" href="#Debugging-Daikon">3 Debugging Daikon</a>
  <ul class="no-bullet">
    <li><a id="toc-Track-logging-1" href="#Track-logging">3.1 Track logging</a>
    <ul class="no-bullet">
      <li><a id="toc-Adding-track-logging-1" href="#Adding-track-logging">3.1.1 Adding track logging</a></li>
      <li><a id="toc-Track-log-output-1" href="#Track-log-output">3.1.2 Track log output</a></li>
    </ul></li>
  </ul></li>
  <li><a id="toc-Daikon-internals-1" href="#Daikon-internals">4 Daikon internals</a>
  <ul class="no-bullet">
    <li><a id="toc-Avoiding-work-for-redundant-invariants-1" href="#Avoiding-work-for-redundant-invariants">4.1 Avoiding work for redundant invariants</a></li>
    <li><a id="toc-Dataflow-hierarchy-1" href="#Dataflow-hierarchy">4.2 Dataflow hierarchy</a></li>
    <li><a id="toc-Equality-optimization-1" href="#Equality-optimization">4.3 Equality optimization</a></li>
  </ul></li>
  <li><a id="toc-Testing-1" href="#Testing">5 Testing</a>
  <ul class="no-bullet">
    <li><a id="toc-Unit-testing-1" href="#Unit-testing">5.1 Unit testing</a>
    <ul class="no-bullet">
      <li><a id="toc-Invariant-format-testing-1" href="#Invariant-format-testing">5.1.1 Invariant format testing</a></li>
      <li><a id="toc-Sample-Testing-1" href="#Sample-Testing">5.1.2 Sample Testing</a>
      <ul class="no-bullet">
        <li><a id="toc-Assertions-1" href="#Assertions">5.1.2.1 Assertions</a></li>
        <li><a id="toc-Example-file-1" href="#Example-file">5.1.2.2 Example file</a></li>
      </ul></li>
    </ul></li>
    <li><a id="toc-Regression-tests-1" href="#Regression-tests">5.2 Regression tests</a>
    <ul class="no-bullet">
      <li><a id="toc-Kvasir-regression-tests-1" href="#Kvasir-regression-tests">5.2.1 Kvasir regression tests</a></li>
      <li><a id="toc-Adding-regression-tests-1" href="#Adding-regression-tests">5.2.2 Adding regression tests</a></li>
    </ul></li>
  </ul></li>
  <li><a id="toc-Editing-Daikon-source-code" href="#Editing">6 Editing Daikon source code</a>
  <ul class="no-bullet">
    <li><a id="toc-Eclipse-setup-1" href="#Eclipse-setup">6.1 Eclipse setup</a>
    <ul class="no-bullet">
      <li><a id="toc-Start-up-Eclipse-1" href="#Start-up-Eclipse">6.1.1 Start up Eclipse</a></li>
      <li><a id="toc-Work-on-existing-coding-projects" href="#Existing-projects">6.1.2 Work on existing coding projects</a>
      <ul class="no-bullet">
        <li><a id="toc-Import-an-existing-project" href="#Import-existing-project">6.1.2.1 Import an existing project</a></li>
        <li><a id="toc-Importing-a-different-existing-project" href="#Import-different-project">6.1.2.2 Importing a different existing project</a></li>
      </ul></li>
      <li><a id="toc-Interaction-with-external-tools" href="#External-tools">6.1.3 Interaction with external tools</a></li>
      <li><a id="toc-Using-the-Eclipse-debugger" href="#Eclipse-debugger">6.1.4 Using the Eclipse debugger</a></li>
      <li><a id="toc-Using-Git-with-Eclipse-1" href="#Using-Git-with-Eclipse">6.1.5 Using Git with Eclipse</a></li>
    </ul></li>
    <li><a id="toc-Editing-daikon_002etexinfo-1" href="#Editing-daikon_002etexinfo">6.2 Editing daikon.texinfo</a></li>
  </ul></li>
  <li><a id="toc-Making-a-distribution-_0028making-a-release_0029" href="#Distribution">7 Making a distribution (making a release)</a>
  <ul class="no-bullet">
    <li><a id="toc-Directory-layout-requirements-1" href="#Directory-layout-requirements">7.1 Directory layout requirements</a></li>
    <li><a id="toc-Distribution-setup-instructions-1" href="#Distribution-setup-instructions">7.2 Distribution setup instructions</a></li>
    <li><a id="toc-Getting-the-latest-version-of-dependencies" href="#Updating-dependencies">7.3 Getting the latest version of dependencies</a></li>
    <li><a id="toc-The-day-before-the-release-1" href="#The-day-before-the-release">7.4 The day before the release</a></li>
    <li><a id="toc-Steps-for-making-the-distribution" href="#Distribution-steps">7.5 Steps for making the distribution</a></li>
  </ul></li>
  <li><a id="toc-Analyzing-historical-versions-of-Daikon" href="#Historical">8 Analyzing historical versions of Daikon</a>
  <ul class="no-bullet">
    <li><a id="toc-Branches-1" href="#Branches">8.1 Branches</a></li>
  </ul></li>
  <li><a id="toc-File-formats-1" href="#File-formats">Appendix A File formats</a>
  <ul class="no-bullet">
    <li><a id="toc-Declarations-in-a-separate-file-1" href="#Declarations-in-a-separate-file">A.1 Declarations in a separate file</a></li>
    <li><a id="toc-File-format-conventions" href="#Conventions">A.2 File format conventions</a></li>
    <li><a id="toc-Declarations-1" href="#Declarations">A.3 Declarations</a>
    <ul class="no-bullet">
      <li><a id="toc-Declaration_002drelated-records-1" href="#Declaration_002drelated-records">A.3.1 Declaration-related records</a>
      <ul class="no-bullet">
        <li><a id="toc-Declaration-version-1" href="#Declaration-version">A.3.1.1 Declaration version</a></li>
        <li><a id="toc-Input_002dlanguage-declaration-1" href="#Input_002dlanguage-declaration">A.3.1.2 Input-language declaration</a></li>
        <li><a id="toc-Variable-comparability-1" href="#Variable-comparability">A.3.1.3 Variable comparability</a></li>
        <li><a id="toc-ListImplementors-declaration-1" href="#ListImplementors-declaration">A.3.1.4 ListImplementors declaration</a></li>
      </ul></li>
      <li><a id="toc-Program-point-declarations-1" href="#Program-point-declarations">A.3.2 Program point declarations</a></li>
      <li><a id="toc-Variable-declarations-1" href="#Variable-declarations">A.3.3 Variable declarations</a></li>
    </ul></li>
    <li><a id="toc-Data-trace-records-1" href="#Data-trace-records">A.4 Data trace records</a>
    <ul class="no-bullet">
      <li><a id="toc-Nonsensical-values-for-variables" href="#Nonsensical-values">A.4.1 Nonsensical values for variables</a></li>
      <li><a id="toc-Variables-that-do-not-appear-in-trace-records-1" href="#Variables-that-do-not-appear-in-trace-records">A.4.2 Variables that do not appear in trace records</a></li>
    </ul></li>
    <li><a id="toc-Example-files-1" href="#Example-files">A.5 Example files</a>
    <ul class="no-bullet">
      <li><a id="toc-Example-declaration-file-1" href="#Example-declaration-file">A.5.1 Example declaration file</a></li>
      <li><a id="toc-Example-data-trace-file-1" href="#Example-data-trace-file">A.5.2 Example data trace file</a></li>
    </ul></li>
    <li><a id="toc-Version-1-Declarations-1" href="#Version-1-Declarations">A.6 Version 1 Declarations</a>
    <ul class="no-bullet">
      <li><a id="toc-V1-Program-point-declarations-1" href="#V1-Program-point-declarations">A.6.1 V1 Program point declarations</a></li>
      <li><a id="toc-Program-point-name-format-specification" href="#V1-pptname-format">A.6.2 Program point name format specification</a></li>
      <li><a id="toc-V1-VarComparability-declaration-1" href="#V1-VarComparability-declaration">A.6.3 V1 VarComparability declaration</a></li>
      <li><a id="toc-V1-ListImplementors-declaration-1" href="#V1-ListImplementors-declaration">A.6.4 V1 ListImplementors declaration</a></li>
    </ul></li>
  </ul></li>
  <li><a id="toc-General-Index-1" href="#General-Index" rel="index">General Index</a></li>
</ul>
</div>



<hr>
<span id="Introduction"></span><div class="header">
<p>
Next: <a href="#Extending-Daikon" accesskey="n" rel="next">Extending Daikon</a>, Previous: <a href="#Top" accesskey="p" rel="prev">Top</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Introduction-1"></span><h2 class="chapter">1 Introduction</h2>

<p>This is the developer manual for the
<a href="http://plse.cs.washington.edu/daikon/">Daikon invariant detector</a>.
</p>
<p>For information about using Daikon, see the
<a href="http://plse.cs.washington.edu/daikon/download/doc/daikon.html#Introduction">Daikon User Manual</a>.
This manual is intended for those who are already familiar with the use
of Daikon, but wish to customize or extend it.
</p>
<p>Additional information can be found in the technical papers available from
<a href="http://plse.cs.washington.edu/daikon/pubs/">http://plse.cs.washington.edu/daikon/pubs/</a>.<!-- /@w -->
</p>
<hr>
<span id="Extending-Daikon"></span><div class="header">
<p>
Next: <a href="#Debugging-Daikon" accesskey="n" rel="next">Debugging Daikon</a>, Previous: <a href="#Introduction" accesskey="p" rel="prev">Introduction</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Extending-Daikon-1"></span><h2 class="chapter">2 Extending Daikon</h2>

<span id="index-extending-Daikon"></span>
<span id="index-changing-Daikon"></span>
<span id="index-customizing-Daikon"></span>
<span id="index-modifying-Daikon"></span>

<p>This chapter describes how to customize or modify Daikon.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Compiling-Daikon" accesskey="1">Compiling Daikon</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Source-code-_0028version-control-repository_0029" accesskey="2">Source code (version control repository)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Using-Eclipse" accesskey="3">Using Eclipse</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#New-invariants" accesskey="4">New invariants</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#New-derived-variables" accesskey="5">New derived variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#New-formatting-for-invariants" accesskey="6">New formatting for invariants</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#New-front-ends" accesskey="7">New front ends</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#New-suppressors" accesskey="8">New suppressors</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Reading-dtrace-files" accesskey="9">Reading dtrace files</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#System_002eexit">System.exit</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Compiling-Daikon"></span><div class="header">
<p>
Next: <a href="#Source-code-_0028version-control-repository_0029" accesskey="n" rel="next">Source code (version control repository)</a>, Up: <a href="#Extending-Daikon" accesskey="u" rel="up">Extending Daikon</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Compiling-Daikon-1"></span><h3 class="section">2.1 Compiling Daikon</h3>

<span id="index-compiling-Daikon"></span>

<p>To compile Daikon, type <code>make</code> in <samp>$DAIKONDIR/java/</samp> or any of its
subdirectories.  Alternately, type <code>make -C $DAIKONDIR compile</code>.
To create the <samp>daikon.jar</samp> file, type <code>make -C $DAIKONDIR daikon.jar</code>.
</p>
<p>The distribution includes <samp>daikon.jar</samp> and compiled <samp>.class</samp> files,
so you do not need to compile them yourself unless you make changes.
</p>
<p>For more information about compiling Daikon, see the comments in the Makefiles.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Requirements-for-compiling-Daikon" accesskey="1">Requirements for compiling Daikon</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr>
<span id="Requirements-for-compiling-Daikon"></span><div class="header">
<p>
Up: <a href="#Compiling-Daikon" accesskey="u" rel="up">Compiling Daikon</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Requirements-for-compiling-Daikon-1"></span><h4 class="subsection">2.1.1 Requirements for compiling Daikon</h4>

<p>Before compiling Daikon, you need to install some dependencies (that is,
software used to build Daikon).  For
<a href="https://github.com/codespecs/daikon/blob/master/scripts/Dockerfile-rockylinux-jdk17-plus">Rocky Linux</a> and
<a href="https://github.com/codespecs/daikon/blob/master/scripts/Dockerfile-ubuntu-jdk17-plus">Ubuntu</a>, you can
find the commands to install these dependencies in file
<samp>$DAIKONDIR/scripts/Dockerfile-<em>OSNAME</em>-jdk<em>N</em>-plus</samp>.
For other operating systems, use similar commands.
</p>
<p>Note that Kvasir, the Daikon front end for the C language
(see <a href="daikon.html#Kvasir">Kvasir</a> in <cite>Daikon User Manual</cite>), does not work on Mac OS.
</p>
<span id="index-_002ejpp-files"></span>
<span id="index-jpp-files"></span>

<p>The Daikon build process uses the C preprocessor
<code>cpp</code> to convert each <samp>.jpp</samp> file in the
distribution into multiple <samp>.java</samp> files, which are then compiled.
If you have a C compiler, you almost certainly have <code>cpp</code>.
</p>

<hr>
<span id="Source-code-_0028version-control-repository_0029"></span><div class="header">
<p>
Next: <a href="#Using-Eclipse" accesskey="n" rel="next">Using Eclipse</a>, Previous: <a href="#Compiling-Daikon" accesskey="p" rel="prev">Compiling Daikon</a>, Up: <a href="#Extending-Daikon" accesskey="u" rel="up">Extending Daikon</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Source-code-_0028version-control-repository_0029-1"></span><h3 class="section">2.2 Source code (version control repository)</h3>

<span id="index-source-code"></span>
<span id="index-repository"></span>
<span id="index-Git-repository"></span>
<span id="index-version-control-repository"></span>

<p>The Daikon git repository is located on GitHub;
see <a href="https://github.com/codespecs/daikon/">https://github.com/codespecs/daikon/</a>.
</p>
<p>After making a local clone, see <a href="#Compiling-Daikon">Compiling Daikon</a>, for instructions
on how to compile Daikon.
</p>

<hr>
<span id="Using-Eclipse"></span><div class="header">
<p>
Next: <a href="#New-invariants" accesskey="n" rel="next">New invariants</a>, Previous: <a href="#Source-code-_0028version-control-repository_0029" accesskey="p" rel="prev">Source code (version control repository)</a>, Up: <a href="#Extending-Daikon" accesskey="u" rel="up">Extending Daikon</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Using-Eclipse-1"></span><h3 class="section">2.3 Using Eclipse</h3>

<span id="index-Eclipse"></span>

<p>[To be improved.]
</p>
<p>Here is one way to use Eclipse to edit Daikon.
</p>
<p>First, make sure that Daikon builds cleanly from the command line.
</p>
<p>File &gt; Import &gt; General &gt; Existing Projects into Workspace
</p>
<p>Choose the <samp>java</samp> directory of your Daikon checkout
</p>
<p>Project &gt; properties &gt; Java build path:
 libraries : <code>add external jars</code> everything in the lib/ directory,
   plus also the <samp>tools.jar</samp> file in the <samp>lib/</samp> directory of your JDK.
   (I&rsquo;m not sure why, but <code>add jars</code> doesn&rsquo;t show all <samp>.jar</samp>
   files in the directory.)
</p>
<p>Source:
   add <samp>Daikon</samp>, remove <samp>Daikon/src</samp>.
   Default output folder: change from <samp>Daikon/bin</samp> to <samp>Daikon</samp>.
</p>

<hr>
<span id="New-invariants"></span><div class="header">
<p>
Next: <a href="#New-derived-variables" accesskey="n" rel="next">New derived variables</a>, Previous: <a href="#Using-Eclipse" accesskey="p" rel="prev">Using Eclipse</a>, Up: <a href="#Extending-Daikon" accesskey="u" rel="up">Extending Daikon</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="New-invariants-1"></span><h3 class="section">2.4 New invariants</h3>

<span id="index-new-invariants"></span>
<span id="index-adding-new-invariants"></span>

<p>You can easily write your own invariants and have Daikon check them,
in addition to all the other invariants that are already part of Daikon.
Adding a new invariant to Daikon requires writing one Java class, as
explained below.
</p><ul>
<li> If you are willing to edit the Daikon source code, you should define the
invariant in Daikon&rsquo;s source code, in a subdirectory of
<samp>java/daikon/inv/</samp>.  Then, edit method <code>Daikon.setup_proto_invs</code> to
call the new invariant&rsquo;s <code>get_proto</code> method and recompile Daikon.
</li><li> If you do not wish to edit the Daikon source code, then compile the new
invariant and put its <samp>.class</samp> file on your classpath.  Then, invoke
Daikon with the <samp>--user_defined_invariant</samp> command-line argument
(see <a href="daikon.html#Options-to-control-invariant-detection">Options to control invariant detection</a> in <cite>Daikon User Manual</cite>).
</li></ul>



<p>The file <samp>java/daikon/inv/unary/scalar/Positive.java</samp> in the
Daikon distribution contains a sample invariant.  This invariant is
true if the variable is always positive (greater than zero).  This
invariant is subsumed by other invariants in the system; it is provided
only as a pedagogical example.  To enable the invariant, comment out the
appropriate line in <code>Daikon.setup_proto_invs()</code>, then recompile
Daikon.
</p>

<p>A Java class defining an invariant is a concrete subclass of one of the direct subclasses of
<a href="http://plse.cs.washington.edu/daikon/download/api/daikon/inv/unary/UnaryInvariant.html"><code>UnaryInvariant</code></a>,
<a href="http://plse.cs.washington.edu/daikon/download/api/daikon/inv/binary/BinaryInvariant.html"><code>BinaryInvariant</code></a>,
or
<a href="http://plse.cs.washington.edu/daikon/download/api/daikon/inv/ternary/TernaryInvariant.html"><code>TernaryInvariant</code></a>.
A complete list of invariants appears in the body of
<code>Daikon.setup_proto_invs()</code>.
</p>
<p>Daikon&rsquo;s invariants are first instantiated, then are presented samples
(tuples of values for all the variables of interest to the invariant;
this might be a 1-tuple, a 2-tuple, or a 3-tuple) in turn.  If any
sample falsifies the invariant, the invariant destroys itself.  All
remaining invariants at the end of the program run can be queried for
their statistical confidence, then reported as
likely to be true.
</p>
<p>You need to implement the abstract methods of <a href="http://plse.cs.washington.edu/daikon/download/api/daikon/inv/Invariant.html"><code>Invariant</code></a> that are not defined in one of the subclasses listed above.  You also need to define a constructor and a static method:
</p>
<dl compact="compact">
<dt><code>protected <var>InvName</var>(PptSlice ppt)</code></dt>
<dd><p>Constructor for class <var>InvName</var>.  Should only be called from
<code>instantiate_dyn</code>.
Its typical implementation is
</p><div class="example">
<pre class="example">super(ppt);
</pre></div>

</dd>
<dt><code>public static <var>InvName</var> get_proto()</code></dt>
<dd><p>Returns the prototype invariant used to create other invariants.  Its
typical implementation is
</p><div class="example">
<pre class="example">if (proto == null)
  proto = new InvName(null);
return (proto);
</pre></div>

</dd>
</dl>

<p>Methods that need to be overridden that are defined in a subclass of
&lsquo;<samp>Invariant</samp>&rsquo; include:
</p>
<dl compact="compact">
<dt><code>public InvariantStatus check_modified(..., int count)</code></dt>
<dt><code>public InvariantStatus add_modified(..., int count)</code></dt>
<dd><p>Determines whether the invariant is true for a sample (a tuple of values).
</p></dd>
</dl>


<p>You will eventually want to override one or more of these methods (see <a href="#New-formatting-for-invariants">New formatting for invariants</a>):
</p>
<dl compact="compact">
<dt><code>public String format()</code></dt>
<dt><code>public String repr()</code></dt>
<dt><code>public String format_using(OutputFormat format)</code></dt>
<dd><p>Returns a high-level printed representation of the
invariant, for user output.
</p></dd>
</dl>


<hr>
<span id="New-derived-variables"></span><div class="header">
<p>
Next: <a href="#New-formatting-for-invariants" accesskey="n" rel="next">New formatting for invariants</a>, Previous: <a href="#New-invariants" accesskey="p" rel="prev">New invariants</a>, Up: <a href="#Extending-Daikon" accesskey="u" rel="up">Extending Daikon</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="New-derived-variables-1"></span><h3 class="section">2.5 New derived variables</h3>

<span id="index-derived-variable"></span>
<span id="index-variable_002c-derived"></span>
<span id="index-adding-new-derived-variables"></span>
<span id="index-new-derived-variables"></span>

<p>A derived variable is an expression that does not appear in the source
code as a variable, but that Daikon treats as a variable for purposes
of invariant detection.  For instance, if there exists an array
&lsquo;<samp>a</samp>&rsquo; and an integer &lsquo;<samp>i</samp>&rsquo;, then Daikon introduces the derived
variable &lsquo;<samp>a[i]</samp>&rsquo;.  This permits detection of invariants over this
quantity.
</p>
<p>(Describing how to create new variety of derived variable is still to
be written.  For now, see the derived variables that appear in the Java
files in directory <samp>$DAIKONDIR/java/daikon/derive/</samp>.)
</p>

<hr>
<span id="New-formatting-for-invariants"></span><div class="header">
<p>
Next: <a href="#New-front-ends" accesskey="n" rel="next">New front ends</a>, Previous: <a href="#New-derived-variables" accesskey="p" rel="prev">New derived variables</a>, Up: <a href="#Extending-Daikon" accesskey="u" rel="up">Extending Daikon</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="New-formatting-for-invariants-1"></span><h3 class="section">2.6 New formatting for invariants</h3>

<span id="index-output-format_002c-defining-new"></span>
<span id="index-new-output-formats"></span>
<span id="index-adding-new-output-formats"></span>

<p>Daikon can print invariants in multiple formats
(see <a href="daikon.html#Invariant-syntax">Invariant syntax</a> in <cite>Daikon User Manual</cite>).
</p>
<p>To support a new output format, you need to do two things:
</p><ul>
<li> In <code>daikon.inv.Invariant.OutputFormat</code>, add a new static final
field and also update the <code>get</code> method.
</li><li> In every subclass of <code>Invariant</code>, edit the
<code>format_using</code> method to handle the new <code>OutputFormat</code>.
</li></ul>

<hr>
<span id="New-front-ends"></span><div class="header">
<p>
Next: <a href="#New-suppressors" accesskey="n" rel="next">New suppressors</a>, Previous: <a href="#New-formatting-for-invariants" accesskey="p" rel="prev">New formatting for invariants</a>, Up: <a href="#Extending-Daikon" accesskey="u" rel="up">Extending Daikon</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="New-front-ends-1"></span><h3 class="section">2.7 New front ends</h3>

<span id="index-front-end_002c-writing"></span>

<p>A front end for Daikon converts data into a form Daikon can process,
producing files in Daikon&rsquo;s input format &mdash; data trace declarations and
records.  For more information about these files, see <a href="#File-formats">File formats</a>.
</p>
<p>The data traces can be obtained from any source.  For instance, front
ends have been built for stock data, weather forecasts, truck weight
data, and spreadsheet data (see <a href="daikon.html#convertcsv_002epl">convertcsv.pl</a> in <cite>Daikon User
Manual</cite>), among others.  More often, users apply a programming language
front end (also called an <em>instrumenter</em>) to a program, causing
executions of the program to write files in Daikon&rsquo;s format.  (For
information about existing front ends, see
<a href="daikon.html#Front-ends-and-instrumentation">Front ends and instrumentation</a> in <cite>Daikon User Manual</cite>.)
When a general front end is not
available, it is possible to manually instrument a specific program so
that it writes files in Daikon&rsquo;s format.  The resulting instrumented
program is very similar to what an instrumenter would have created, so
this section is relevant to both approaches.
</p>
<p>Conceptually, a front end instrumenter has two tasks.  Suppose you want to
infer invariants at a program point (say, a line of code or the entry or
exit from a procedure).  The front end must create a
declaration (see <a href="#Declarations">Declarations</a>) that
lists the variables in scope at that program point.  Every time that
program point is executed, the program must output a data trace record
(see <a href="#Data-trace-records">Data trace records</a>).  A front end can make the program output a
data trace record by inserting a <code>printf</code> (or similar) statement that
outputs the current
values of the variables of interest.
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Example-instrumented-Java-program" accesskey="1">Example instrumented Java program</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Instrumenting-C-programs" accesskey="2">Instrumenting C programs</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Example-instrumented-Java-program"></span><div class="header">
<p>
Next: <a href="#Instrumenting-C-programs" accesskey="n" rel="next">Instrumenting C programs</a>, Up: <a href="#New-front-ends" accesskey="u" rel="up">New front ends</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Example-instrumented-Java-program-1"></span><h4 class="subsection">2.7.1 Example instrumented Java program</h4>

<span id="index-instrumenting-Java-programs"></span>
<span id="index-Java-programs_002c-instrumenting"></span>

<p>This section gives an example of how an instrumenter for Java might
work; other languages are analogous.
Suppose we wish to instrument file <samp>Example.java</samp>.
</p><div class="example">
<pre class="example">class Example {
  // Return either the square of x or the square of (x+1).
  int squar(int x, boolean b) {
    if (b)
      x++;
    return x*x;
  }
}
</pre></div>

<p>The <samp>.decls</samp> file might look like the following.
</p><div class="example">
<pre class="example">DECLARE
Example.squar:::ENTER
x
int
int
1
b
boolean
int
2

DECLARE
Example.squar:::EXIT
x
int
int
1
b
boolean
int
2
return
int
int
1
</pre></div>

<p>The instrumented <samp>.java</samp> file might look like the following.
This example does not compute the &ldquo;modified bits&rdquo;, but simply sets
them all to 1, which is a safe default.
</p><div class="example">
<pre class="example">class Example {
  static {
    daikon.chicory.Runtime.setDtraceMaybe(&quot;daikon-output/StackAr.dtrace&quot;);
  }

  // Return either the square of x or the square of (x+1).
  int squar(int x, boolean b) {
    synchronized (daikon.chicory.Runtime.dtrace) {
      daikon.chicory.Runtime.dtrace.println();
      daikon.chicory.Runtime.dtrace.println(&quot;Example.squar:::ENTER&quot;);
      daikon.chicory.Runtime.dtrace.println(&quot;x&quot;);
      daikon.chicory.Runtime.dtrace.println(x);
      daikon.chicory.Runtime.dtrace.println(1);  // modified bit
      daikon.chicory.Runtime.dtrace.println(&quot;b&quot;);
      daikon.chicory.Runtime.dtrace.println(b ? 1 : 0);
      daikon.chicory.Runtime.dtrace.println(1);  // modified bit
    }

    if (b)
      x++;

    int daikon_return_value = x*x;
    synchronized (daikon.chicory.Runtime.dtrace) {
      daikon.chicory.Runtime.dtrace.println();
      daikon.chicory.Runtime.dtrace.println(&quot;Example.squar:::EXIT&quot;);
      daikon.chicory.Runtime.dtrace.println(&quot;x&quot;);
      daikon.chicory.Runtime.dtrace.println(x);
      daikon.chicory.Runtime.dtrace.println(1);  // modified bit
      daikon.chicory.Runtime.dtrace.println(&quot;b&quot;);
      daikon.chicory.Runtime.dtrace.println(b ? 1 : 0);
      daikon.chicory.Runtime.dtrace.println(1);  // modified bit
      daikon.chicory.Runtime.dtrace.println(&quot;return&quot;);
      daikon.chicory.Runtime.dtrace.println(daikon_return_value);
      daikon.chicory.Runtime.dtrace.println(1);  // modified bit
    }

    return daikon_return_value;
  }
}
</pre></div>

<p>(Daikon&rsquo;s Java front end, Chicory, does not actually insert
instrumentation into the Java source code of your program.  Rather, it
instruments the bytecode as it is loaded into the JVM.  This is more
efficient, and it avoids making any changes to your <samp>.java</samp> or
<samp>.class</samp> files.  We have shown an example of  Java source code
instrumentation because that is  simpler to explain and understand than
the bytecode instrumentation.)
</p>

<hr>
<span id="Instrumenting-C-programs"></span><div class="header">
<p>
Previous: <a href="#Example-instrumented-Java-program" accesskey="p" rel="prev">Example instrumented Java program</a>, Up: <a href="#New-front-ends" accesskey="u" rel="up">New front ends</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Instrumenting-C-programs-1"></span><h4 class="subsection">2.7.2 Instrumenting C programs</h4>

<span id="index-C-programs_002c-instrumenting"></span>
<span id="index-instrumenting-C-programs"></span>

<p>Daikon comes with a front end for the C language:  Kvasir
(see <a href="daikon.html#Kvasir">Kvasir</a> in <cite>Daikon User Manual</cite>).
Kvasir only works under the Linux operating system, and it works only on
&ldquo;x86&rdquo; (Intel 386, 486, 586, 686 compatible) and &ldquo;x86-64&rdquo; (AMD64, EM64T
compatible) processors.
</p>
<p>You may wish to infer invariants over C programs running on other
platforms; for instance, you want a robust C front end that works under
Microsoft Windows.  This section will help you to either write such a
front end or to hand-instrument your program to produce output that
Daikon can process.
</p>
<p>We welcome additions and corrections to this part of the manual.  And,
if you write a C instrumenter that might be of use to others, please
contribute it back to the Daikon project.
</p>

<p>A front end for C (or any other language) performs two tasks.  It
determines the names of all variables that are in scope at a particular
program point, and it prints the values of those variables each time the
program point executes.
</p>
<p>Determining the names of the variables is straightforward.  It requires
either parsing source code or parsing a compiled executable.  In the
latter case, the variables can be determined from debugging information
that the compiler places in the executable.
</p>
<p>The challenge for C programs is determining the values of variables at
execution time:  for each variable, the front end must determine whether
the variable&rsquo;s value is valid, and how big the value is.
</p>
<span id="index-valid-values"></span>
<span id="index-invalid-values"></span>
<span id="index-nonsensical-values"></span>
<span id="index-uninitialized-variables"></span>
<span id="index-deallocated-pointers"></span>

<p>A front end should print only variables that have <em>valid</em> values.
Examples of invalid values are variables that have not yet been
initialized and pointers whose content has been deallocated.  (A pointer
dereference, such as &lsquo;<samp>*p</samp>&rsquo; or &lsquo;<samp>p-&gt;field</samp>&rsquo;, can itself
be to uninitialized and/or deallocated memory.)  Invalid values should
be printed as &lsquo;<samp>nonsensical</samp>&rsquo; (see <a href="#Data-trace-records">Data trace records</a>).
</p>
<p>It is desirable to print &lsquo;<samp>nonsensical</samp>&rsquo; rather than an invalid value,
for two reasons.  First, outputting nonsense values can degrade
invariant detection; patterns in the valid data may be masked by noise
from invalid values.  Second, an attempt to access an invalid value can
cause the instrumented program to crash!  For instance, suppose that
pointer &lsquo;<samp>p</samp>&rsquo; is not yet initialized &mdash; the pointer value refers to
some arbitrary location in memory, possibly even an address that the
operating system has not allocated to the program.  An attempt to print
the value of &lsquo;<samp>*p</samp>&rsquo; or &lsquo;<samp>p-&gt;field</samp>&rsquo; will result in a segmentation
fault when &lsquo;<samp>*p</samp>&rsquo; is accessed.  (If you choose never to dereference a
pointer while performing instrumentation, then you do not need to worry
about invalid references.  However, you will be unable to output any
fields of a pointer to a struct or class, making your front end less
useful.  You will still be able to output fields of a regular variable
to a struct or class, but most interesting uses of structs and classes
in C and C++ are through pointers.)
</p>
<p>C relies on the programmer to remember which variables are valid, and
the programmer must take care never to access invalid variables.
Unfortunately, there is no simple automatic way to determine variable
validity for an arbitrary C program.  (Languages with automatic memory
management, such as Java, do not pose these problems.  All variables
always have an initial value, so there is no danger of printing
uninitialized memory, though the initial value may not be particularly
meaningful.  Because pointed-to memory is never deallocated, all
non-null pointers are always valid, so there is no danger of a
segmentation fault.)
</p>
<p>An instrumenter needs information about validity of variable values.
This could be obtained from the programmer (which requires work on the
part of the user of Daikon), or obtained automatically by creating a new
run-time system that tracks the information (which requires a more
sophisticated front end).
</p>
<p>In addition to determining which variables are uninitialized and which
pointers are to allocated memory, there are additional problems for a C
front end.  For example, given a char pointer &lsquo;<samp>*c</samp>&rsquo;, does it point
to a single character, or to an array of characters?  If it points to an
array of characters, how big is that array?  And for each element of the
array, is that element initialized or not?
</p>

<p>The problem of tracking C memory may seem daunting, but it is not
insurmountable.  There exist many tools for detecting or debugging
memory errors in C, and they need to perform exactly the same memory
tracking as a Daikon front end must perform.  Therefore, a Daikon front
end can use the same well-known techniques, and possibly can even be
built on top of such a tool.  For instance, one C front end, named Kvasir, is
built on top of the Valgrind tool (<a href="https://valgrind.org/">https://valgrind.org/</a>),
greatly reducing the implementation effort.  Valgrind only works under
Linux, but a C front end for another platform could build on a similar
tool; many other such tools exist.
</p>

<p>There are two basic approaches to instrumenting a C program (or a
program in any other language):  instrument the source code, or
instrument a compiled binary representation of the program.  In each
case, additional code that tracks all memory allocations, deallocations,
writes, and reads must be executed at run time.  Which approach is most
appropriate for you depends on what tools you use when building your C
instrumentation system.
</p>

<p>In some cases, it may not be necessary to build a fully general C
instrumentation system.  You may be able to craft a smaller, simpler
extension to an existing program &mdash; enabling that program (only) to
produce files for Daikon to analyze.
</p>
<p>For instance, many programs use specialized memory allocation routines
(customized versions of <code>malloc</code> and <code>free</code>), in order to
prevent or detect memory errors.  The information that such libraries
collect is often sufficient to determine which variable values should be
printed, and which should be suppressed in favor of printing
&lsquo;<samp>nonsensical</samp>&rsquo; instead.
</p>

<p>The presence of memory errors &mdash; even in a program that <em>appears</em>
to run correctly &mdash; makes it much harder to create Daikon&rsquo;s output.
Therefore, as a prerequisite to instrumenting a C program, it is usually
a good idea to run a memory checker on that program and to eliminate any
memory errors.
</p>





<hr>
<span id="New-suppressors"></span><div class="header">
<p>
Next: <a href="#Reading-dtrace-files" accesskey="n" rel="next">Reading dtrace files</a>, Previous: <a href="#New-front-ends" accesskey="p" rel="prev">New front ends</a>, Up: <a href="#Extending-Daikon" accesskey="u" rel="up">Extending Daikon</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="New-suppressors-1"></span><h3 class="section">2.8 New suppressors</h3>

<span id="index-adding-new-suppressors"></span>
<span id="index-new-suppressors"></span>
<span id="index-suppressors_002c-adding-new"></span>

<p>As mentioned in <a href="#Daikon-internals">Daikon internals</a>, one way to make Daikon more
efficient, and to reduce clutter in the output to the user, is to reduce the
number of redundant invariants of various kinds.  This section describes
how to add a new suppressor relation, such that if invariant A implies
B, B is not instantiated or checked as long as A holds, saving time and
space.  Suppression implications use some terminology.  A
<em>suppressor</em> (defined in the class <code>NISuppressor</code>) is one of a
set of invariants (<code>NISuppression</code>) that imply and suppress a
<em>suppressee</em> invariant (<code>NISuppressee</code>).  The set of all of
the suppressions that suppress a particular <var>suppressee</var> is stored in the
class <code>NISuppressionSet</code>.
</p>
<p>Adding a new suppression is straightforward when the invariants involved
do not have any state.  Define the <var>suppressee</var> and
each of the suppressions that suppress it using the corresponding
constructors.  Add the method <code>get_ni_suppressions</code> to the class
of the invariant being suppressed and return the appropriate
suppression set.  Make sure that <code>get_ni_suppressions</code> always
returns the same suppression set (i.e., that storage to store
the suppressions is only allocated once).  Normally this is
done by defining a static variable to hold the suppression sets
and initializing this variable the first time that <code>get_ni_suppressions</code>
is called.
</p>
<p>The following example defines suppressions for &lsquo;<samp>x == y</samp>&rsquo; implies
&lsquo;<samp>x &gt;= y</samp>&rsquo; and &lsquo;<samp>x &gt; y</samp>&rsquo; implies &lsquo;<samp>x &gt;= y</samp>&rsquo;.
</p>
<div class="example">
<pre class="example">private static NISuppressionSet suppressions = null;

public NISuppressionSet get_ni_suppressions() {
  if (suppressions == null) {
    NISuppressee = new NISuppressee(IntGreaterEqual);

    NISuppressor v1_eq_v2 = new NISuppressor(0, 1, IntEqual.class);
    NISuppressor v1_lt_v2 = new NISuppressor(0, 1, IntLessThan.class);

    suppressions = new NISuppressionSet(new NISuppression[] {
      new NISuppression(v1_eq_v2, suppressee),
      new NISuppression(v1_lt_v2, suppressee),
    });
  }
  return suppressions;
}
</pre></div>

<p>For suppressions depending on the state of a particular invariant,
each <code>Invariant</code> has an <code>isObviousDynamically(VarInfo[] vis)</code>
method that is called once the state of other invariants has already
been determined.  This method returns a non-null value if this invariant
is implied by a fact that can be derived from the given <code>VarInfo</code>s.
</p>
<p>For example, suppose division was not defined for divisors smaller than 1.
The following example defines an obvious check for &lsquo;<samp>x &lt;= c</samp>&rsquo;
(where c &lt; 1 is a constant) implies &lsquo;<samp>y % x == 0</samp>&rsquo;, written in the
Divides class.
</p>
<div class="example">
<pre class="example">public DiscardInfo isObviousDynamically(VarInfo[] vis) {
  DiscardInfo di = super.isObviousDynamically(vis);
  if(di != null) {
    return di;
  }

  VarInfo var1 = vis[0];

  PptSlice1 ppt_over1 = ppt.parent.findSlice(var1);

  if(ppt_over1 == null) {
    return null;
  }

  for(Invariant inv : ppt_over1.invs) {
    if(inv instanceof UpperBound) {
      if(((UpperBound) inv).max() &lt; 1) {
        return new DiscardInfo(this, DiscardCode.obvious,
                       &lsquo;<samp>Divides is obvious when divisor less than one</samp>&rsquo;);
      }
    }
  }

  return null;
}
</pre></div>


<hr>
<span id="Reading-dtrace-files"></span><div class="header">
<p>
Next: <a href="#System_002eexit" accesskey="n" rel="next">System.exit</a>, Previous: <a href="#New-suppressors" accesskey="p" rel="prev">New suppressors</a>, Up: <a href="#Extending-Daikon" accesskey="u" rel="up">Extending Daikon</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Reading-dtrace-files-1"></span><h3 class="section">2.9 Reading dtrace files</h3>

<p>If you wish to write a program that manipulates a <samp>.dtrace</samp> file, you
can use Daikon&rsquo;s built-in mechanisms for parsing <samp>.dtrace</samp> files.
(This is easier and less error-prone than writing your own parser.)
</p>
<p>You will write a subclass of <code>FileIO.Processor</code>, then pass an instance
of that class to <code>FileIO.read_data_trace_files</code>.  Daikon will parse
each record in the trace files that you indicate, then will pass the parsed
version to methods in your processor.
</p>
<p>For a simple example of how to use <code>FileIO.Processor</code>, see the file
<br>
<samp>daikon/java/daikon/tools/ReadTrace.java</samp>.
</p>

<hr>
<span id="System_002eexit"></span><div class="header">
<p>
Previous: <a href="#Reading-dtrace-files" accesskey="p" rel="prev">Reading dtrace files</a>, Up: <a href="#Extending-Daikon" accesskey="u" rel="up">Extending Daikon</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="System_002eexit-1"></span><h3 class="section">2.10 System.exit</h3>

<p>The Daikon codebase does not call <code>System.exit()</code>, except in a
dummy main method that catches <code>TerminationMessage</code>, which is the
standard way that a component of Daikon requests the JVM to shut down.
</p>
<p>The reason for this is that calling <code>System.exit()</code> is usually a
bad idea.  It makes the class unusable as a subroutine, because it
might kill the calling program.  It can cause deadlock.  And it can
leave data in an inconsistent state (for example, if the program was in
the middle of writing a file, still held non-Java locks, etc.), because
the program has no good way of completing any actions that it was in the
middle of.  Therefore, it is better to throw an exception and let the
program handle it appropriately.  (This is true of instrumentation code
as well.)
</p>
<p>To see the stack trace for a <code>TerminationMessage</code>, pass
<samp>--config_option daikon.Debug.show_stack_trace=true</samp> on the command
line.
</p>

<hr>
<span id="Debugging-Daikon"></span><div class="header">
<p>
Next: <a href="#Daikon-internals" accesskey="n" rel="next">Daikon internals</a>, Previous: <a href="#Extending-Daikon" accesskey="p" rel="prev">Extending Daikon</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Debugging-Daikon-1"></span><h2 class="chapter">3 Debugging Daikon</h2>

<span id="index-debugging-Daikon"></span>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Track-logging" accesskey="1">Track logging</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<p><a href="daikon.html#Daikon-debugging-options">Daikon debugging options</a> in <cite>Daikon User Manual</cite> describes
several command-line options that enable logging, which can be a useful
alternative to using a debugger when debugging Daikon.  Because Daikon
processes large amounts of data, using a debugger can be difficult.
</p>
<p>This chapter describes some of the command-line options in more detail.
</p>

<hr>
<span id="Track-logging"></span><div class="header">
<p>
Up: <a href="#Debugging-Daikon" accesskey="u" rel="up">Debugging Daikon</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Track-logging-1"></span><h3 class="section">3.1 Track logging</h3>

<span id="index-logging"></span>
<span id="index-track-logging"></span>

<p>Often it is desirable to print information only about one or more specific
invariants.  This is distinct from general logging because it concentrates
on specific invariant objects rather than a particular class or portion of Daikon.
This is referred to as <em>Track</em> logging because it tracks particular
values across Daikon.
</p>
<p>The <samp>--track <var>class|class|...&lt;var</var><i>,</i><var>var</var><i>,</i><var>var&gt;@ppt</var></samp>
option to Daikon
(see <a href="daikon.html#Daikon-debugging-options">Daikon debugging options</a> in <cite>Daikon User Manual</cite>)
enables track logging.
The argument to the <samp>--track</samp> option supplies three pieces of information:
</p>
<ol>
<li> The class name of the invariant (e.g., <code>IntEqual</code>).
Multiple class arguments can be specified separated by pipe symbols
(&lsquo;<samp>|</samp>&rsquo;).

</li><li> The variables that are used in the invariant (e.g., <code>return</code>,
<code>size(this.s[])</code>).  The variables are specified in angle brackets
(&lsquo;<samp>&lt;&gt;</samp>&rsquo;).

</li><li> The program point of interest (e.g.,
<code>DataStructures.StackAr.findMin()V:::ENTER</code>).
The program point is preceded by an at sign (&lsquo;<samp>@</samp>&rsquo;).

</li></ol>

<p>Each item is optional.
For example:
</p><div class="example">
<pre class="example">IntEqual&lt;x,y&gt;@makeEmpty()
LessThan|GreaterThan&lt;return,orig(y)&gt;@EXIT99
</pre></div>

<p>Multiple <samp>--track</samp> switches can be specified. The class, program point,
and each of the variables must match one of the specifications in order
for information concerning the invariant to be printed.
</p>
<p>Matching is a simple substring comparison.  The specified item must be
a substring of the actual item.  For instance, <code>LessThan</code> matches
both <code>IntLessThan</code> and <code>FloatLessThan</code>.
</p>
<p>Program points and variables are specified exactly as they are seen in
normal Daikon invariant output.  Specifically, <code>Ppt.name</code> and
<code>VarInfo.name.name()</code> are used to generate the names for comparisons.
</p>
<p>Invariants are not the only classes that can be tracked.  Any class name
is a valid entry.  Thus, for example, to print information about derived
sequence variables from sequence <code>this.theArray[]</code> and scalar
<code>x</code> at program point <code>DisjSets.find(int):::EXIT</code>, the tracking
argument would be:
</p>
<div class="example">
<pre class="example">SequenceScalarSubscriptFactory&lt;x,this.theArray[]&gt;@DisjSets.find(int):::EXIT
</pre></div>

<p>There are two configuration options that can customize the output.  The
option <samp>daikon.Debug.showTraceback</samp> will output a stack trace on
each log statement.  The option <samp>daikon.Debug.logDetail</samp> will cause
more detailed (and often voluminous) output to be printed.  For more
information, see <a href="daikon.html#Configuration-options">Configuration options</a> in <cite>Daikon User Manual</cite>.
</p>
<p>Note that all interesting information is not necessarily logged.
It will often be necessary to add new logging statements for the specific
information of interest (see <a href="#Adding-track-logging">Adding track logging</a>).
This is covered in the next section.
</p>
<p>More detailed information can be found in the Javadoc for
<code><a href="http://plse.cs.washington.edu/daikon/download/api/daikon/Debug.html">daikon.Debug</a></code>
and
<a href="http://plse.cs.washington.edu/daikon/download/api/daikon/inv/Invariant.html"><code>daikon.inv.Invariant</code></a>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Adding-track-logging" accesskey="1">Adding track logging</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Track-log-output" accesskey="2">Track log output</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Adding-track-logging"></span><div class="header">
<p>
Next: <a href="#Track-log-output" accesskey="n" rel="next">Track log output</a>, Up: <a href="#Track-logging" accesskey="u" rel="up">Track logging</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Adding-track-logging-1"></span><h4 class="subsection">3.1.1 Adding track logging</h4>

<span id="index-adding-track-logging"></span>

<p>When you add a new invariant, derived variable, or other component to
Daikon, you should ensure that it supports track logging in the same way
that existing components do.  This section describes how to do so.
</p>
<p>Track logging is based
around the class name, program point name, and variables of interest.
Track logging methods accept these parameters and a string to be printed.
<samp>Debug.java</samp> implements the following basic log methods:
</p>
<div class="example">
<pre class="example">log (String)
log (Class, Ppt, String)
log (Class, Ppt, VarInfo[], String)
</pre></div>

<p>The first uses the cached version of the <code>Class</code>, <code>Ppt</code>,
and <code>VarInfo</code> that
was provided in the constructor.  The second uses the specified
variables and the <code>VarInfo</code> information from <code>Ppt</code>.
The third specifies each variable explicitly.
</p>
<p>When logging is not enabled, calling the logging functions can take a
significant amount of time (because the parameters need to be evaluated and
passed).  To minimize this, a function <code>logOn()</code> is provided to see
if logging is enabled.  It is recommended that code of the following form
be used for efficiency:
</p>
<div class="example">
<pre class="example">if (Debug.logOn()) {
  Debug.log (getClass(), ppt, &quot;Entering routine foo&quot;);
}
</pre></div>

<p>Track logging also can work with other loggers.  Each of the logging
methods has an alternative version that also accepts a logger as the
first argument.  In this case, normal track logging is performed if
the class, <code>ppt</code>, and vars match.  If they don&rsquo;t match, the same
information is logged via the specified logger.  For example:
</p>
<div class="example">
<pre class="example">if (Debug.logOn || logger.isLoggable (Level.FINE)) {
  Debug.log (logger, getClass(), ppt, &quot;Entering routine foo&quot;);
}
</pre></div>

<p>The above will print if either the tracking information matches or if the
specified logger is enabled.
</p>
<p>Convenience methods are available for track logging invariants.  In this
case the class name, <code>ppt</code>, and variable information are all taken from the
invariant.  The available methods are:
</p>
<div class="example">
<pre class="example">logOn()
logDetail()
log (String)
log (Logger, String)
</pre></div>

<p>These correspond to the <code>Debug</code> methods described above.  They are
the recommended way to log information concerning invariants.
</p>
<p>Track logging also provides one additional level of detail.  The function
<code>logDetail()</code> returns whether or not more detailed information
should be printed.  This should be used for information which is not
normally interesting or especially voluminous output.  Often statements
using <code>logDetail()</code> should be commented out when not in active use.
</p>

<hr>
<span id="Track-log-output"></span><div class="header">
<p>
Previous: <a href="#Adding-track-logging" accesskey="p" rel="prev">Adding track logging</a>, Up: <a href="#Track-logging" accesskey="u" rel="up">Track logging</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Track-log-output-1"></span><h4 class="subsection">3.1.2 Track log output</h4>

<span id="index-track-log-output"></span>

<p>Each call to a track log method will produce output in the same basic
format. Space for three variables is always maintained for consistency:
</p>
<div class="example">
<pre class="example">&nbsp;daikon.Debug: &lt;class&gt;: &lt;ppt&gt;: &lt;var1&gt;: &lt;var2&gt;: &lt;var3&gt;: &lt;msg&gt;
</pre></div>

<p>If <code>showTrackback</code> is enabled, the &lsquo;<samp>traceback</samp>&rsquo; will follow each
line of debug output.
</p>

<hr>
<span id="Daikon-internals"></span><div class="header">
<p>
Next: <a href="#Testing" accesskey="n" rel="next">Testing</a>, Previous: <a href="#Debugging-Daikon" accesskey="p" rel="prev">Debugging Daikon</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Daikon-internals-1"></span><h2 class="chapter">4 Daikon internals</h2>

<span id="index-Daikon-internals"></span>
<span id="index-efficiency-issues"></span>
<span id="index-optimizations"></span>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Avoiding-work-for-redundant-invariants" accesskey="1">Avoiding work for redundant invariants</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Dataflow-hierarchy" accesskey="2">Dataflow hierarchy</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Equality-optimization" accesskey="3">Equality optimization</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<p>This chapter describes some of the techniques used in Daikon to make
it efficient in terms of time and space needed.  These techniques can
be enabled or disabled at the Daikon command line, as described in
<a href="daikon.html#Running-Daikon">Running Daikon</a> in <cite>Daikon User Manual</cite>.
</p>
<hr>
<span id="Avoiding-work-for-redundant-invariants"></span><div class="header">
<p>
Next: <a href="#Dataflow-hierarchy" accesskey="n" rel="next">Dataflow hierarchy</a>, Up: <a href="#Daikon-internals" accesskey="u" rel="up">Daikon internals</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Avoiding-work-for-redundant-invariants-1"></span><h3 class="section">4.1 Avoiding work for redundant invariants</h3>

<span id="index-non_002dinstantiation-of-invariants"></span>
<span id="index-non_002dchecking-of-invariants"></span>
<span id="index-non_002dprinting-of-invariants"></span>

<p>Daikon reduces run time and memory by avoiding performing work for
redundant invariants that provide no useful information to the user.
There are three basic types of optimization that can be performed for
uninteresting invariants:  non-instantiation, suppression, and
non-printing.
</p>
<p><em>Non-instantiation</em> prevents the creation of an invariant because
the invariant&rsquo;s truth value is statically obvious (from the semantics
of the programming language), no matter what values may be seen at run
time.  Two examples are &lsquo;<samp>A[i] is an element of A[]</samp>&rsquo; and &lsquo;<samp>size(A[])
&gt;= 0</samp>&rsquo;.  Non-instantiation is implemented by the by the
<code>isObviousStatically</code> method.
With the equality sets optimization (see <a href="#Equality-optimization">Equality optimization</a>),
non-instantiation can only happen if all equality permutations are
statically obvious.  Note that <code>isObviousStatically</code> should
be used only for invariants that are known to be true.  Other code
presumes that any statically obvious invariants are true and can
be safely presumed when determining if other invariants are redundant.
</p>
<p>An invariant can be <em>suppressed</em> if it is logically implied by some
set of other invariants (referred to as <em>suppressors</em>).  A suppressed
invariant is not instantiated or checked as long as its suppressors
hold.  For example &lsquo;<samp>x &gt; y</samp>&rsquo; implies &lsquo;<samp>x &gt;= y</samp>&rsquo;.  Suppression has some
limitations.  It cannot use as suppressors or suppress sample dependent
invariants (invariants that adapt themselves to the samples they see and
whose equation thus involves a constant such as &lsquo;<samp>x &gt; 42</samp>&rsquo;).
Suppression also cannot use relationships between variables.  For
example, it cannot suppress &lsquo;<samp>x[i] = y[j]</samp>&rsquo; by &lsquo;<samp>(x[] = y[]) ^ (i =
j)</samp>&rsquo;.  Suppressor invariants can only use variables that are also in the
invariant that is being suppressed.  In this example, only invariants
using the variables &lsquo;<samp>x[i]</samp>&rsquo; and &lsquo;<samp>y[i]</samp>&rsquo; can be used as a suppressors.
See <a href="#New-suppressors">New suppressors</a> for more information.
</p>
<p><em>Non-printing</em> is a post-pass that throws out any invariants that
are implied by other true invariants.  It is similar to suppression, but
has none of the limitations of suppression.  But since it is only run as
a post pass, it cannot optimize run time and memory use as suppression can.
Non-printing should be used only in cases where suppression cannot.
Non-printing is implemented by <code>ObviousFilter</code>, which calls the
<code>isObviousDynamically</code> method on invariants.  The
<code>isObviousStatically</code> method is also used by the non-printing
checks; it can be called at the end without reference to equality sets.
</p>
<p>More detail can be found in the paper &ldquo;Efficient incremental algorithms
for dynamic detection of likely invariants&rdquo; by Jeff H. Perkins and
Michael D. Ernst, published in Foundations of Software Engineering in 2004;
the paper is available from
<a href="http://plse.cs.washington.edu/daikon/pubs/invariants-incremental-fse2004-abstract.html">http://plse.cs.washington.edu/daikon/pubs/invariants-incremental-fse2004-abstract.html</a>.
</p>
<hr>
<span id="Dataflow-hierarchy"></span><div class="header">
<p>
Next: <a href="#Equality-optimization" accesskey="n" rel="next">Equality optimization</a>, Previous: <a href="#Avoiding-work-for-redundant-invariants" accesskey="p" rel="prev">Avoiding work for redundant invariants</a>, Up: <a href="#Daikon-internals" accesskey="u" rel="up">Daikon internals</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Dataflow-hierarchy-1"></span><h3 class="section">4.2 Dataflow hierarchy</h3>

<span id="index-dataflow-hierarchy"></span>
<span id="index-hierarchy"></span>

<p>The dataflow hierarchy expresses relationships between variables at
different program points.  It is used to save time and space during invariant
generation and to prevent invariants from being printed multiple times.
</p>
<p>Suppose there are two program points X and its parent Y.  Then every sample
seen at X is also seen at Y, and every invariant that is true at Y is also
true at X.
</p>
<p>Variable <em>z</em> in program point X is
related to variable <em>z&rsquo;</em> in another program point Y by a <em>flow</em> relation
if every sample seen of <em>z</em> at X is also seen of <em>z&rsquo;</em> at Y.
Y is called a parent program point of X.
</p>
<p>For example, all the field
variables in the <code>:::ENTER</code> program point of a method in class C relate to
the field variables in the <code>:::CLASS</code> program point of C.  This is because
the state of C, when in context at the entry <code>:::ENTER</code> program point, is
also in context at the <code>:::CLASS</code> program point.  Any invariant that holds
true on a parent program point must hold on the child program point.
Daikon saves time and space by only computing invariants at the highest parent
at which they apply.
</p>

<p><a href="#Program-point-declarations">Program point declarations</a> describe how program points are
declared in a Daikon input file. Here we will describe how the
<code>parent</code> records are typically used to connect program points into
a dataflow hierarchy.
</p>
<p>Daikon uses three primary relationship types
(<code>PARENT</code>, <code>ENTER-EXIT</code> and <code>EXIT-EXITNN</code>) to connect the program points
into an acyclic dataflow hierarchy.
</p>
<ul>
<li> A program point that represents the <code>ENTRY</code> or <code>EXIT</code> of a
static method will have a <code>parent</code> record that points to the
<code>CLASS</code> program point for the containing class.

</li><li> A program point that represents the <code>ENTRY</code> or <code>EXIT</code> of a
non-static (instance) method will have a <code>parent</code> record that points to the
<code>OBJECT</code> program point for the containing object.

</li><li> An <code>ENTER-EXIT</code> edge connects each method&rsquo;s <code>ENTER</code> program
point with its corresponding <code>EXCEPTION</code> and <code>EXIT</code> program points.

</li><li> An <code>EXIT-EXITNN</code> edge connects each method&rsquo;s <code>EXIT</code> program
point with each of its corresponding <code>EXIT&lt;id&gt;</code> program points.

<p>A program point that represents a <code>CLASS</code>
will usually not have a <code>parent</code> record.
</p>
</li><li> A program point that represents a <code>OBJECT</code>
will have a <code>parent</code> record that points to the <code>CLASS</code>
program point for the object if the object has static data members.
</li></ul>

<p>When using Daikon, the relations used to describe the dataflow
hierarchy may result in some true invariants that are not reported at
some program points.  However, the invariant will be present in some
parent program point.  The dataflow hierarchy is used by default, but
can be disabled by the <samp>--nohierarchy</samp> flag.  When dataflow is enabled,
the only samples that are examined by Daikon are the <code>:::EXIT</code> program
points (plus &lsquo;<samp>orig</samp>&rsquo; variables) since these contain a complete view of
the data, from which invariants at all other locations can be inferred.
For example, Daikon does not need to examine data at <code>:::ENTER</code> or
<code>:::OBJECT</code> program points which are parents of <code>:::EXIT</code> in the
dataflow hierarchy.
</p>

<hr>
<span id="Equality-optimization"></span><div class="header">
<p>
Previous: <a href="#Dataflow-hierarchy" accesskey="p" rel="prev">Dataflow hierarchy</a>, Up: <a href="#Daikon-internals" accesskey="u" rel="up">Daikon internals</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Equality-optimization-1"></span><h3 class="section">4.3 Equality optimization</h3>

<span id="index-equality-optimization"></span>

<p>When N variables are equal within a program point there will be
N(N-1)/2 pairwise invariants to represent the equality within the
equal variables, and N copies of every other invariant.  For example,
if a, b, and c are equal, then &lsquo;<samp>a == b</samp>&rsquo;, &lsquo;<samp>a == c</samp>&rsquo;, &lsquo;<samp>b == c</samp>&rsquo; will be
reported as pairwise invariants, and &lsquo;<samp>odd(a)</samp>&rsquo;, &lsquo;<samp>odd(b)</samp>&rsquo; and &lsquo;<samp>odd(c)</samp>&rsquo;
will be reported.  If the variables will always be equal, then
reporting N times the invariants is wasteful.  Daikon thus treats
equality specially.
</p>
<p>Each group of variables that are equal from the start of inferencing
are placed in <em>equality sets</em>.  An equality set can hold an
arbitrary number of variables, and replaces the O(N^2) pairwise
equality invariants.  Every equality set has a leader or
<em>canonical</em> representation by a variable in the set.
Non-equality invariants are only instantiated and checked on the
leader.  When printing invariants, Daikon reports only invariants on
the leader.  The user can easily determine that &lsquo;<samp>odd(a)</samp>&rsquo; and &lsquo;<samp>a == b</samp>&rsquo;
imply &lsquo;<samp>odd(b)</samp>&rsquo;.  Equality optimization can be turned off at the
command line with the <samp>--noequality</samp> flag.
</p>

<hr>
<span id="Testing"></span><div class="header">
<p>
Next: <a href="#Editing" accesskey="n" rel="next">Editing</a>, Previous: <a href="#Daikon-internals" accesskey="p" rel="prev">Daikon internals</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Testing-1"></span><h2 class="chapter">5 Testing</h2>

<span id="index-testing-Daikon"></span>

<p>Daikon has two sets of tests: unit tests (see <a href="#Unit-testing">Unit testing</a>) and
regression tests (see <a href="#Regression-tests">Regression tests</a>).  If there
are any differences between the expected results and the ones you get,
don&rsquo;t check in your changes until you understand which is the desired
behavior and possibly update the goals.
</p>
<p>The Daikon distribution contains unit tests, but not regression tests
(which would make the distribution much larger).  The regression tests
appear in Daikon&rsquo;s version control repository (see <a href="#Source-code-_0028version-control-repository_0029">Source code (version control repository)</a>), within the <samp>tests</samp> subdirectory.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Unit-testing" accesskey="1">Unit testing</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Regression-tests" accesskey="2">Regression tests</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Unit-testing"></span><div class="header">
<p>
Next: <a href="#Regression-tests" accesskey="n" rel="next">Regression tests</a>, Up: <a href="#Testing" accesskey="u" rel="up">Testing</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Unit-testing-1"></span><h3 class="section">5.1 Unit testing</h3>

<span id="index-unit-testing"></span>
<span id="index-new-unit-tests"></span>
<span id="index-adding-new-unit-tests"></span>

<p>The unit tests are found in <samp>daikon/java/daikon/test/</samp>; they use
the &lsquo;<samp>JUnit</samp>&rsquo; unit testing framework.  They take a few seconds to run.  They
are automatically run each time you compile Daikon (by running
<code>make</code> in <samp>$DAIKONDIR/java</samp> or any of its subdirectories).  You can
also run them explicitly via <code>make unit</code>.  When you write new code
or modify old code, please try to add unit tests.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Invariant-format-testing" accesskey="1">Invariant format testing</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Sample-Testing" accesskey="2">Sample Testing</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Invariant-format-testing"></span><div class="header">
<p>
Next: <a href="#Sample-Testing" accesskey="n" rel="next">Sample Testing</a>, Up: <a href="#Unit-testing" accesskey="u" rel="up">Unit testing</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Invariant-format-testing-1"></span><h4 class="subsection">5.1.1 Invariant format testing</h4>

<p>This tests the formatting of invariants with specified input.  The
tests are configured in the file <samp>InvariantFormatTest.commands</samp> under
<samp>daikon/test/</samp>.  The <samp>InvariantFormatTest.commands</samp> file must be
in the classpath when this tester is run.
</p>
<p>The file is formatted as follows:
</p><div class="example">
<pre class="example">&lt;fully qualified class name&gt; [&lt;instantiate args&gt;]
&lt;type string&gt;
&lt;goal string&gt;+ &lt;- 1 or more goal strings
&lt;sample&gt;* &lt;- 0 or more samples
</pre></div>

<p>The file format should be the same regardless of blank or commented
lines except in the samples area. No blank lines or comments should
appear after the goal string before the first sample or between parts
of samples (these lines are used to determine where sample
lists end). This will be remedied in a future version of the tester.
</p>
<dl compact="compact">
<dt><code>Instantiate args</code></dt>
<dd><p>These are optional additional arguments to the static
instantiate method of the class.  Each argument consists of the type (boolean
or int) followed by the value.  For example:
</p><div class="example">
<pre class="example">boolean true
int 37 boolean false
</pre></div>

</dd>
<dt><code>Type string:</code></dt>
<dd><p>A type string must consist of one or more of the following literals:
&lsquo;<samp>int</samp>&rsquo;, &lsquo;<samp>double</samp>&rsquo;, &lsquo;<samp>string</samp>&rsquo;, &lsquo;<samp>int_array</samp>&rsquo;,
&lsquo;<samp>double_array</samp>&rsquo;, or &lsquo;<samp>string_array</samp>&rsquo;, separated by spaces.
This string represents the
types that an invariant is supposed to compare For instance, a binary
integer comparison would have type string &lsquo;<samp>int int</samp>&rsquo;.  A pairwise
sequence comparison would have type string &lsquo;<samp>int_array int_array</samp>&rsquo;.
</p>
</dd>
<dt><code>Goal string:</code></dt>
<dd><p>The goal string must start with the prefix &lsquo;<samp>Goal </samp>&rsquo;, and then
continue with &lsquo;<samp>(&lt;format type&gt;): </samp>&rsquo;,
where format type is the format in which the invariant will
print. After this the representation of the invariant must occur. It
must represent the invariant result exactly as printed, even white
space is significant (as proper formatting should be correct down to
the whitespace). The first variable (the one corresponding to the
first type in the type string) corresponds with &lsquo;<samp>a</samp>&rsquo;, the second with
&lsquo;<samp>b</samp>&rsquo; and so on. Format the type string accordingly. (In samples, the
value of &lsquo;<samp>a</samp>&rsquo; is read first, possibly followed by &lsquo;<samp>b</samp>&rsquo;, and then
possibly &lsquo;<samp>c</samp>&rsquo;, depending on the arity of the invariant.)
</p>
<div class="example">
<pre class="example">Example:
Type string, Goals
 |             |
\|/            |
int           \|/
Goal (daikon): a &gt;= -6
Goal (java): a &gt;= -6
Goal (esc): a &gt;= -6
Goal (ioa): a &gt;= -6
Goal (jml): a &gt;= -6
Goal (simplify): (&gt;= |a| -6)
</pre></div>

<p>Note that the spacing on the goal lines is exact, that is, no extra
spaces are allowed and no spaces are allowed to be missing. So the
exact format is again:
</p><div class="example">
<pre class="example">Goal&lt;1 space&gt;(&lt;format name&gt;):&lt;1 space&gt;&lt;goal text&gt;
</pre></div>

</dd>
<dt><code>Samples:</code></dt>
<dd><p>Values formatted according to the type string, one value per
line Make sure that the samples provided are actually instances of that
particular invariant (That is, if the desired invariant is &lsquo;<samp>a &lt; b</samp>&rsquo;, then
the first number of each sample better be less than the second)
</p>

<p>Arrays and strings must be formatted according to the Daikon <samp>.dtrace</samp> file
convention (for a full description, see <a href="#File-formats">File formats</a>).  This
states that arrays must be surrounded in brackets (start with &lsquo;<samp>[</samp>&rsquo;, end
with &lsquo;<samp>]</samp>&rsquo;), and entries must be separated by a space.  Strings must be
enclosed in quotes (&lsquo;<samp>&quot;</samp>&rsquo;). Quotes within a string can be represented by the
sequence &lsquo;<samp>\&quot;</samp>&rsquo;.
</p>
<p>For example:
</p><div class="example">
<pre class="example">[1 2 3 4 5] - an array with the elements 1, 2, 3, 4, 5
&quot;aString&quot; - a string
&quot;a string&quot; - also legal as a string
&quot;\&quot;&quot; - the string with the value &quot;
[&quot;a&quot; &quot;b&quot; &quot;c&quot;] - an array of strings

int int        &lt;- type string
Goal: a &lt; b    &lt;- goal string, no comment/blank lines after this
1              &lt;- or before this
2
2              &lt;-|__ Pair of values (a = 2 , b = 3)
3              &lt;-|
</pre></div>

<p>Other examples are in the existing test file
(<samp>InvariantFormatTest.commands</samp>).
</p></dd>
</dl>

<p>The output of a test run can be converted into goals by using the
<samp>--generate_goals</samp> switch to the tester as follows:
</p><div class="example">
<pre class="example">java daikon.test.InvariantFormatTester --generate_goals
</pre></div>

<p>Note that this test is included in the set of tests performed by the
master tester, and so it is not necessary to separately run this test
except to generate goal files.
</p>
<p>Furthermore, this framework cannot parse complex types from files
unless they contain a <code>public Object valueOf(String s)</code>
function. Otherwise the program has no was of knowing how to create
such an object from a string. All primitives and the String type are
already recognized.
</p>
<hr>
<span id="Sample-Testing"></span><div class="header">
<p>
Previous: <a href="#Invariant-format-testing" accesskey="p" rel="prev">Invariant format testing</a>, Up: <a href="#Unit-testing" accesskey="u" rel="up">Unit testing</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Sample-Testing-1"></span><h4 class="subsection">5.1.2 Sample Testing</h4>

<p>Sample testing tests various components of Daikon as samples are being
processed.  A file (normally <samp>daikon/test/SampleTester.commands</samp>)
specifies a <samp>.decls</samp> file to use, the samples for each &lsquo;<samp>ppt/var</samp>&rsquo;,
and assertions
about Daikon&rsquo;s state (such as whether or not a particular invariant exists).
</p>
<p>Each line of the file specifies exactly one command.  Blank lines and
leading blanks are ignored.  Comments begin with the number sign (&lsquo;<samp>#</samp>&rsquo;) and
extend to the end of the line.  The type of command is specified as the
first token on the line followed by a colon.  The supported commands
are:
</p>
<dl>
<dt id="index-decl_003a">SampleTester Command: <strong>decl:</strong> <em>decl-file</em></dt>
<dd><p>This command specifies the declaration file to use.  This is a normal
<samp>.decls</samp> file that should follow the format defined in the user manual.
</p></dd></dl>

<dl>
<dt id="index-ppt_003a">SampleTester Command: <strong>ppt:</strong> <em>ppt</em></dt>
<dd><p>This command specifies the program point that will be used with following
vars, data, and assert commands.  The program point should be specified
exactly as it appears in the <samp>.decls</samp> file.
</p></dd></dl>

<dl>
<dt id="index-vars_003a">SampleTester Command: <strong>vars:</strong> <em>var1 var2...</em></dt>
<dd><p>Specifies the variables that will be used on following data lines.
Each variable must match exactly a variable in the <code>ppt</code>.  Other
variables will be treated as missing.
</p></dd></dl>

<dl>
<dt id="index-data_003a">SampleTester Command: <strong>data:</strong> <em>val1 val2...</em></dt>
<dd><p>Specifies the values for each of the previously specified variables.  The
values must match the type of the variables.  A single dash (-) indicates
that a variable is missing.
</p></dd></dl>

<dl>
<dt id="index-assert_003a">SampleTester Command: <strong>assert:</strong> <em>assertion</em></dt>
<dd><p>Specifies an assertion that should be true at this point (see <a href="#Assertions">Assertions</a>).
The negation of an assertion can be specified by adding an exclamation
point before the assertion (for example: <code>!inv(&quot;x &gt; y&quot;, x, y</code>)).
</p></dd></dl>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Assertions" accesskey="1">Assertions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Example-file" accesskey="2">Example file</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Assertions"></span><div class="header">
<p>
Next: <a href="#Example-file" accesskey="n" rel="next">Example file</a>, Up: <a href="#Sample-Testing" accesskey="u" rel="up">Sample Testing</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Assertions-1"></span><h4 class="subsubsection">5.1.2.1 Assertions</h4>

<p>Assertions are formatted like function calls: <code>&lt;name&gt;(arg1, arg2, ...)</code>.
The valid assertions for the assert: command are:
</p>
<dl>
<dt id="index-inv">Assertion: <strong>inv</strong> <em>format var1 ...</em></dt>
<dd>
<p>The <code>inv</code> assertion asserts that the specified invariant exists in the
current <code>ppt</code>.  The <var>format</var> argument is the result of calling
<code>format()</code> on
the invariant.  This is how the invariant is recognized.  The remaining
arguments are the variables that make up the invariants slice.  These
must match exactly variables in the <code>ppt</code>.  The <code>inv</code> assertion
returns true if and only if the slice exists and an invariant is found
within that slice that
matches <var>format</var>.
</p>
<p>Optionally, <var>format</var> can be replaced by the fully qualified class name of
the invariant.  In this case, it is only necessary for the class to match.
</p></dd></dl>

<p>More assertions can easily be added to <samp>SampleTester.java</samp> as required.
</p>
<hr>
<span id="Example-file"></span><div class="header">
<p>
Previous: <a href="#Assertions" accesskey="p" rel="prev">Assertions</a>, Up: <a href="#Sample-Testing" accesskey="u" rel="up">Sample Testing</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Example-file-1"></span><h4 class="subsubsection">5.1.2.2 Example file</h4>

<p>The following is an simple example of sample testing.
</p><div class="example">
<pre class="example">decl: daikon/test/SampleTesters.decls

ppt: foo.f():::EXIT35
  vars: x y z
  data: 1 1 0
  data: 2 1 0
  assert: inv(&quot;x &gt;= y&quot;, x, y)
  assert: inv(daikon.inv.binary.twoScalar.IntGreaterEqual,x,y)
  assert: !inv(&quot;x &lt;= y&quot;, x, y)
</pre></div>

<hr>
<span id="Regression-tests"></span><div class="header">
<p>
Previous: <a href="#Unit-testing" accesskey="p" rel="prev">Unit testing</a>, Up: <a href="#Testing" accesskey="u" rel="up">Testing</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Regression-tests-1"></span><h3 class="section">5.2 Regression tests</h3>

<span id="index-regression-tests"></span>

<p>The regression tests run Daikon on many different inputs and compare
Daikon&rsquo;s output to expected output.  They take about an hour to run.
</p>
<p>The regression tests appear in the <samp>$DAIKONDIR/tests/</samp> directory.  Type
<code>make</code> in that directory to see a list of Makefile targets.  The
most common target is <code>make diffs</code>; if any output file has
non-zero size, the tests fail.  You do not generally need to do
<code>make clean</code>, which forces re-instrumentation (a possibly slow
process) the next time you run the tests.
</p>
<p>As when you install or compile Daikon, when you run the tests
environment variable <code>DAIKONDIR</code>
should be set.
</p>
<p>You should generally run the regression tests before checking it a
change (especially any non-trivial change).  If any of the regression
test diffs has a non-zero size, then your edits have changed Daikon&rsquo;s
output and you should not check in without carefully determining that
the changes are intentional and desirable (in which case you should update the
goal output files, so that the diffs are again zero).
</p>
<p>There are several subdirectories under <samp>$DAIKONDIR/tests/</samp>, testing
different components of the Daikon distribution (such as Kvasir,
see <a href="daikon.html#Kvasir">Kvasir</a> in <cite>Daikon User Manual</cite>).  Tests of the
invariant detection engine itself appear in
<samp>$DAIKONDIR/tests/daikon-tests/</samp>.
</p>
<p>Each Makefile under <samp>$DAIKONDIR/tests</samp> includes
<samp>$DAIKONDIR/tests/Makefile.common</samp>, which contains the logic for all of
the tests.  <samp>Makefile.common</samp> is somewhat complicated, if only
because it controls so many types of tests.
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Kvasir-regression-tests" accesskey="1">Kvasir regression tests</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Adding-regression-tests" accesskey="2">Adding regression tests</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr>
<span id="Kvasir-regression-tests"></span><div class="header">
<p>
Next: <a href="#Adding-regression-tests" accesskey="n" rel="next">Adding regression tests</a>, Up: <a href="#Regression-tests" accesskey="u" rel="up">Regression tests</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Kvasir-regression-tests-1"></span><h4 class="subsection">5.2.1 Kvasir regression tests</h4>


<p>The Kvasir (Daikon C front-end) tests appear in the
<samp>$DAIKONDIR/tests/kvasir-tests</samp> directory. These tests run Daikon to ensure
that the Kvasir output is valid Daikon input. To run them, go to
<samp>$DAIKONDIR/tests/kvasir-tests</samp> or of its sub-directories and run
<code>make summary-w-daikon</code>. If any tests return &lsquo;<samp>FAILED</samp>&rsquo;, then
you should look at the appropriate <samp>.diff</samp> file. If you feel that the
failure was actually a result of your Daikon changes and should be in fact
correct output, then run <code>make update-inv-goals</code> to update the Daikon
<samp>invs.goal</samp> file.
</p>


<hr>
<span id="Adding-regression-tests"></span><div class="header">
<p>
Previous: <a href="#Kvasir-regression-tests" accesskey="p" rel="prev">Kvasir regression tests</a>, Up: <a href="#Regression-tests" accesskey="u" rel="up">Regression tests</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Adding-regression-tests-1"></span><h4 class="subsection">5.2.2 Adding regression tests</h4>

<span id="index-adding-new-regression-tests"></span>
<span id="index-new-regression-tests"></span>

<p>Most Daikon regression tests are in subdirectories of
<samp>$DAIKONDIR/tests/daikon-tests/</samp>.
(There is also a <samp>$DAIKONDIR/tests/chicory-tests/</samp> directory,
but it is usually better to put tests in
<samp>$DAIKONDIR/tests/daikon-tests/</samp>, even if they are exercising
Chicory-specific behavior.)
</p>
<p>To create a new test, perform the following steps.
</p>
<ol>
<li> Create a new subdirectory of
<samp>$DAIKONDIR/tests/daikon-tests/</samp>.

</li><li> Put the source files for the test under <samp>$DAIKONDIR/tests/sources/</samp>,
not in the test directory itself.  Your test may be able to re-use existing
Java source code that appears in that directory.

</li><li> It is expedient to copy a Makefile from another subdirectory, such as
<samp>$DAIKONDIR/tests/daikon-tests/StackAr/</samp>, then modify it.

<p>The <samp>Makefile</samp> must contain at least the following entries.
</p>
<dl compact="compact">
<dt>&lsquo;<samp>MAIN_CLASS</samp>&rsquo;</dt>
<dd><p>Dot separated fully qualified name of the class that contains the main
entry point for the test.  For example,
</p><div class="example">
<pre class="example">MAIN_CLASS := DataStructures.StackArTester.
</pre></div>

</dd>
<dt>&lsquo;<samp>include ../../Makefile.common</samp>&rsquo;</dt>
<dd><p>This includes the common portion of the test Makefiles that does most
of the work.  See it for more information on the details of regression
testing.
</p>
</dd>
<dt>&lsquo;<samp>instrument-files-revise:</samp>&rsquo;</dt>
<dd><p>A target that writes the list of files to instrument.  For example,
</p><div class="example">
<pre class="example">instrument-files-revise:
    echo &quot;DataStructures/StackAr.java&quot; &gt;| ${INST_LIST_FILE}
</pre></div>

</dd>
</dl>

<p>If you run <code>make</code> (without a target), you will see a description of
all of the Makefile&rsquo;s functionality.  Most of that is inherited from
<samp>$DAIKONDIR/tests/Makefile.common</samp>.
</p>
</li><li> The <samp>.goal</samp> files are the expected results of running Daikon and its
associated tools.

<p>For example, the <samp>StackAr</samp>
directory contains the following <samp>.goal</samp> files, among others:
</p><div class="example">
<pre class="example">Makefile
Stackar.spinfo-static.goal
StackAr.txt-daikon.goal
StackAr.txt-esc.goal
StackAr.txt-jml.goal
StackAr.txt-merge-esc.goal
StackAr.txt-merge-jml.goal
</pre></div>

<p>If you omit some <samp>.goal</samp> files, then the related tests will not be run.
(If you can&rsquo;t figure out how to ensure the tests are not run, it may be
easier to just add the additional <samp>.goal</samp> files.)
</p>
<p>You can start out with the <samp>.goal</samp> files empty.
Execute <code>make diffs</code>, to produce output; the tests will fail
because the output is not identical to the empty <samp>.goal</samp> files.
When the test output is satisfactory, execute
<code>make update-goals</code> to copy the actual results to the <samp>.goal</samp> files.
Then, commit the goal files, Makefile, and source files
to the repository.
</p>
</li><li> Make the new test be run by adding to the appropriate list (usually
&lsquo;<samp>everything</samp>&rsquo; or &lsquo;<samp>quick</samp>&rsquo;) in
<samp>$DAIKONDIR/tests/daikon-tests/Makefile</samp>.

</li></ol>

<p>For more information, see the comments in file
<samp>$DAIKONDIR/tests/Makefile.common</samp>.
</p>
<hr>
<span id="Editing"></span><div class="header">
<p>
Next: <a href="#Distribution" accesskey="n" rel="next">Distribution</a>, Previous: <a href="#Testing" accesskey="p" rel="prev">Testing</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Editing-Daikon-source-code"></span><h2 class="chapter">6 Editing Daikon source code</h2>

<p>The Daikon source code follows
the <a href="https://google.github.io/styleguide/javaguide.html">Google Java Style</a>
and also
<a href="http://homes.cs.washington.edu/~mernst/advice/coding-style.html">Michael Ernst&rsquo;s coding conventions</a>.
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Eclipse-setup" accesskey="1">Eclipse setup</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Editing-daikon_002etexinfo" accesskey="2">Editing daikon.texinfo</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Eclipse-setup"></span><div class="header">
<p>
Next: <a href="#Editing-daikon_002etexinfo" accesskey="n" rel="next">Editing daikon.texinfo</a>, Up: <a href="#Editing" accesskey="u" rel="up">Editing</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Eclipse-setup-1"></span><h3 class="section">6.1 Eclipse setup</h3>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Start-up-Eclipse" accesskey="1">Start up Eclipse</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Existing-projects" accesskey="2">Existing projects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#External-tools" accesskey="3">External tools</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Eclipse-debugger" accesskey="4">Eclipse debugger</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Using-Git-with-Eclipse" accesskey="5">Using Git with Eclipse</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Start-up-Eclipse"></span><div class="header">
<p>
Next: <a href="#Existing-projects" accesskey="n" rel="next">Existing projects</a>, Up: <a href="#Eclipse-setup" accesskey="u" rel="up">Eclipse setup</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Start-up-Eclipse-1"></span><h4 class="subsection">6.1.1 Start up Eclipse</h4>

<p>Just run the command <code>eclipse</code> at the command shell.
</p>
<p>There is one big catch:  take note of where you launch Eclipse and
<b>always</b> launch Eclipse from the same location. For example, you might
want to alias run-eclipse with <code>cd $HOME; eclipse</code>.
For convenience, this is already done for you if you source the
<samp>daikon-dev.bashrc</samp> startup script.
There are ways around the launch location inconvenience, such as
the -data switch, but the alias trick should be the simplest and least
confusing workaround.
</p>

<p>It is strongly recommended that you make the following customizations to Eclipse:
</p>
<div class="example">
<pre class="example">Window &gt;&gt; Preferences &gt;&gt; Workbench &gt;&gt; Refresh Workspace on Startup
Window &gt;&gt; Preferences &gt;&gt; Java &gt;&gt; Compiler &gt;&gt; Problems &gt;&gt; Unused imports &gt;&gt; Ignore
Window &gt;&gt; Preferences &gt;&gt; Java &gt;&gt; Compiler &gt;&gt; Style &gt;&gt; Non-static access &gt;&gt; &gt;&gt; Ignore
</pre></div>


<hr>
<span id="Existing-projects"></span><div class="header">
<p>
Next: <a href="#External-tools" accesskey="n" rel="next">External tools</a>, Previous: <a href="#Start-up-Eclipse" accesskey="p" rel="prev">Start up Eclipse</a>, Up: <a href="#Eclipse-setup" accesskey="u" rel="up">Eclipse setup</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Work-on-existing-coding-projects"></span><h4 class="subsection">6.1.2 Work on existing coding projects</h4>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Import-existing-project" accesskey="1">Import existing project</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Import-different-project" accesskey="2">Import different project</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Import-existing-project"></span><div class="header">
<p>
Next: <a href="#Import-different-project" accesskey="n" rel="next">Import different project</a>, Up: <a href="#Existing-projects" accesskey="u" rel="up">Existing projects</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Import-an-existing-project"></span><h4 class="subsubsection">6.1.2.1 Import an existing project</h4>


<p>Second, import Daikon into Eclipse.  To import:  start Eclipse, then choose
menu item &lsquo;<samp>File-&gt;Import-&gt;ExistingProjectIntoWorkspace</samp>&rsquo;, then enter (the full
name of) directory <samp>$DAIKONDIR/java</samp> for Project Contents.
</p>
<p>Those two steps are all there is to it!
</p>
<p>(This simple procedure works because there are already
<samp>.project</samp> and <samp>.classpath</samp> files in <samp>$DAIKONDIR/java</samp>.
To import a project that doesn&rsquo;t have these files, you would need to create
them (for instance, copy them from Daikon&rsquo;s), or else follow a different
procedure to work on your project in Eclipse.)
</p>

<hr>
<span id="Import-different-project"></span><div class="header">
<p>
Previous: <a href="#Import-existing-project" accesskey="p" rel="prev">Import existing project</a>, Up: <a href="#Existing-projects" accesskey="u" rel="up">Existing projects</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Importing-a-different-existing-project"></span><h4 class="subsubsection">6.1.2.2 Importing a different existing project</h4>

<p>Before working on code in Eclipse, you must import the code into
the Eclipse workspace.  You also need to set up various compilation
settings and specify jars and classes that should be in the
compilation classpath.  (By default, Eclipse does not use your
<code>CLASSPATH</code> environment variable.)
</p>
<ol>
<li> Change to the Java perspective by selecting &quot;Java Perspective&quot; in
the perspective menu on the far-left tool panel.  You should see some
of the windows move around to a structure similar to the screenshot
below.

</li><li> Select the menu item File-&gt;New-&gt;Project

</li><li> On the popup window, select Java Project and click Next

</li><li> Call the project &lsquo;<samp>Daikon</samp>&rsquo; or some other appropriate name and
click Next.

</li><li> On the next window, create a new folder in
the project called <samp>src</samp>, and answer Yes to the next dialog box asking
you to confirm a change in the build directory. Select &lsquo;<samp>Ok</samp>&rsquo; and you
should see the new Project as a small folder icon in the package
explorer.

</li><li> Select the menu item File-&gt;Import

</li><li> On the next popup window, select &lsquo;<samp>File System</samp>&rsquo; and click
Next. Browse to the folder containing your source code.  Using the
standard &lsquo;<samp>PAG</samp>&rsquo; setup, the folder should be <samp>$DAIKONDIR/java</samp>. The import
destination should be <samp>Daikon/src</samp>.  Check the boxes for including
Daikon, &lsquo;<samp>jtb</samp>&rsquo;, and plume.

</li><li> Finally, add the required jars for Daikon by right-clicking on
the project and selecting the Properties menu.  Select &quot;Java Build
Path&quot;, then &quot;Libraries&quot;, then &quot;Add External Jars&quot; and add <samp>tools.jar</samp>
and all <samp>.jar</samp> files in <samp>daikon/java/lib/</samp>.
</li></ol>

<p>Note that if you follow these directions, then
<b>the compiled classes do not appear in the directory from
which you imported in the previous step</b>.
Instead, the compiled classes appear in the Eclipse workspace
directory. If you followed the setup instructions above, then the
compiled code will be in &quot;$HOME/.eclipse/Daikon/bin&quot;, which you
should add to your classpath in order to use the updates you make from
Eclipse.
</p>

<hr>
<span id="External-tools"></span><div class="header">
<p>
Next: <a href="#Eclipse-debugger" accesskey="n" rel="next">Eclipse debugger</a>, Previous: <a href="#Existing-projects" accesskey="p" rel="prev">Existing projects</a>, Up: <a href="#Eclipse-setup" accesskey="u" rel="up">Eclipse setup</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Interaction-with-external-tools"></span><h4 class="subsection">6.1.3 Interaction with external tools</h4>

<p>Eclipse compiles your project whenever you save.
However, it parses frequently during editing and issues most or all of the
errors and warnings that the compiler would have.  In order to clear a
warning/error (in the Task List), you must save the file, however.
</p>
<p>If you change files outside Eclipse, you should refresh Eclipse, via
right-clicking on the project or via menu item File &gt;&gt; Refresh.
</p>

<hr>
<span id="Eclipse-debugger"></span><div class="header">
<p>
Next: <a href="#Using-Git-with-Eclipse" accesskey="n" rel="next">Using Git with Eclipse</a>, Previous: <a href="#External-tools" accesskey="p" rel="prev">External tools</a>, Up: <a href="#Eclipse-setup" accesskey="u" rel="up">Eclipse setup</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Using-the-Eclipse-debugger"></span><h4 class="subsection">6.1.4 Using the Eclipse debugger</h4>

<p>To begin debugging, you can click on the bug icon in the toolbar or
select Run-&gt;Debug from the menu.  You will see the same window as if
you selected Run-&gt;Run, but when the Java application launches, Eclipse
will switch to the Debugging Perspective, which reveals many windows
such as the stack trace window, the variable values window, and the
step control panel.
</p>
<p>Debugging features (window locations given for default setup):
</p>
<ul>
<li> Breakpoints: You can add breakpoints during editing by
double-clicking on the left margin area of the source code.  When
debugging, the program halts when it reaches a breakpoint.

</li><li> Stack Trace: Once the program halts at a breakpoint, the window
in the upper-left corner window show the stack trace.

</li><li> Step Controls: Once the program halts at a breakpoint, the panels
just below the stack trace allow you to step through the code one line
at a time (step over), resume execution as normal (resume), step down
into a method call (step into), or execute until leaving the current
method (Step return).

</li><li> Variables: On the top right window, there is a tab pane that displays
the values of objects and fields during a breakpoint halt.  You can also
type in any legal Java expression that could appear at the breakpoint,
and the window will display the value of the expression (don&rsquo;t forget to
put a semi-colon at the end of your expression!).
</li></ul>


<hr>
<span id="Using-Git-with-Eclipse"></span><div class="header">
<p>
Previous: <a href="#Eclipse-debugger" accesskey="p" rel="prev">Eclipse debugger</a>, Up: <a href="#Eclipse-setup" accesskey="u" rel="up">Eclipse setup</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Using-Git-with-Eclipse-1"></span><h4 class="subsection">6.1.5 Using Git with Eclipse</h4>

<p>This section has yet to be written, although you can just do all the editing,
compiling, and
running from the Eclipse IDE while doing version control commands from the shell
or whatever current system you use.
</p>

<hr>
<span id="Editing-daikon_002etexinfo"></span><div class="header">
<p>
Previous: <a href="#Eclipse-setup" accesskey="p" rel="prev">Eclipse setup</a>, Up: <a href="#Editing" accesskey="u" rel="up">Editing</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Editing-daikon_002etexinfo-1"></span><h3 class="section">6.2 Editing daikon.texinfo</h3>

<p>The Daikon manual appears in <samp>doc/daikon.texinfo</samp>.  The manual is
written using the Texinfo formatting system, which makes it easy to produce
HTML, info, or printed (PDF) output.
</p>
<p>You can edit the manual using an ordinary text editor.  Emacs has a
useful Texinfo mode.  You can mimic the formatting commands that
already appear in the manual, but it&rsquo;s also a good idea to read the
<a href="http://www.gnu.org/software/texinfo/">Texinfo documentation</a>.
</p>
<p>If you wish to create a new section of the manual, insert two lines like
the following:
</p>
<div class="example">
<pre class="example">@node    @<em>Short title</em>
@<em>chapter</em> @<em>Long title</em>
</pre></div>

<p>where you select the short and the long titles (which may
be the same), and you may replace <code>@chapter</code> by <code>@section</code>,
<code>@subsection</code>, or <code>@subsubsection</code>.
</p>
<p>Follow the Texinfo conventions for marking up text.  In particular:
</p><ul>
<li> Don&rsquo;t use regular double quotes (&quot;) in running text.  Instead, use
two single back quotes and two regular quotes, &ldquo;like this&rdquo;.  Emacs will
do this substitution for you if you are using its Texinfo mode.

</li><li> Often, some other kind of markup is better than quotes:
<ul>
<li> <code>@code</code> is for names of classes, functions, variables, keywords, and
      other fragments of source code.
</li><li> <code>@var</code> is for meta-syntactic variables, not for referring to variables
      that appear literally in the source code.
</li><li> <code>@file</code> is for the names of files.
</li><li> <code>@option</code> is for command-line options.
</li><li> <code>@samp</code> is for sample input or output.  (Alternatively, you can use
      <code>@example</code> to set off longer input/output strings.)
</li><li> <code>@command</code> is for command lines.
</li></ul>

</li><li> Examples shouldn&rsquo;t include extra spaces on the left for
indentation since Texinfo already adds some indentation.  Remember
that in code examples you need to replace all curly braces with { and }
to quote them for Texinfo.

</li><li> Don&rsquo;t mix <code>@example</code> and <code>@smallexample</code> in the same section since it
looks funny to have examples in two different sized fonts.  If your example
is too wide to fit on the page with <code>@example</code>, it&rsquo;s better to insert some
line breaks to make it more readable than to shrink the font.
</li></ul>

<p>Once you have edited the manual, run <code>make</code> twice (yes, you must run
it twice) in order to generate formatted versions of the manual
(<samp>daikon.</samp>{<samp>html</samp>,<samp>pdf</samp>}).
</p>


<hr>
<span id="Distribution"></span><div class="header">
<p>
Next: <a href="#Historical" accesskey="n" rel="next">Historical</a>, Previous: <a href="#Editing" accesskey="p" rel="prev">Editing</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Making-a-distribution-_0028making-a-release_0029"></span><h2 class="chapter">7 Making a distribution (making a release)</h2>

<p>This section provides the instructions for publishing a Daikon distribution,
or making a release.
If you only want to
create the <samp>daikon.tar</samp> or <samp>daikon.tar.gz</samp> file in your own
directory, then simply run <code>make daikon.tar</code> or <code>make daikon.tar.gz</code>.
</p>
<p>Official releases have even version numbers (e.g., 4.6.4) and
intermediate work has odd version numbers (e.g., 4.7.3).  This means
as you prepare for a release the current version number is probably odd.  It will
be updated as one of the steps in the release process.  After making the
distribution, one of the final steps is to increment the version number again to
prepare for subsequent development.  This system has the useful side effect
of allowing the build and test process to be repeated to fix a problem
without having to worry about updating or resetting the version number.
Another advantage is to reinforce, to people who are working from the
version control repository, that they are not using the released version,
because the version numbers differ.
</p>
<p>The Daikon distribution site is located at
<a href="http://plse.cs.washington.edu/daikon/">http://plse.cs.washington.edu/daikon/</a> and is served from the UW CSE
file system at
<samp>/cse/web/research/plse/daikon</samp>.
In order to be able to write to the distribution site, your CSE user id must be
a member of the &lsquo;<samp>plse_www</samp>&rsquo; Unix group.
</p>
<p>For each of the major steps below, an
approximate elapsed time is listed.  These timings are up to date as of December 2015.
They were measured on a quad x86-64 based
machine at 3.4GHz with 16GB of memory
(buffalo.cs.washington.edu).
Barring any difficulties,
the entire process
will take at least two hours &mdash; but could be much more depending on the number of
different platforms on which you test the release.
</p>
<p>Each of the steps below assumes that you are using the Bash shell.
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Directory-layout-requirements" accesskey="1">Directory layout requirements</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Distribution-setup-instructions" accesskey="2">Distribution setup instructions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Updating-dependencies" accesskey="3">Updating dependencies</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#The-day-before-the-release" accesskey="4">The day before the release</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Distribution-steps" accesskey="5">Distribution steps</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr>
<span id="Directory-layout-requirements"></span><div class="header">
<p>
Next: <a href="#Distribution-setup-instructions" accesskey="n" rel="next">Distribution setup instructions</a>, Up: <a href="#Distribution" accesskey="u" rel="up">Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Directory-layout-requirements-1"></span><h3 class="section">7.1 Directory layout requirements</h3>

<ul>
<li> Environment variable <code>DAIKONDIR</code> must be set to a clone of
<a href="https://github.com/codespecs/daikon">https://github.com/codespecs/daikon</a>.

</li><li> A clone of
<a href="https://github.com/codespecs/fjalar">https://github.com/codespecs/fjalar</a> must be a sibling of
<samp>$DAIKONDIR</samp>.



</li><li> Environment variable <code>JAVA_HOME</code> must be set to the appropriate JDK installation.
For now, this should be a current version of JDK 8. If the default JDK on your
system is not JDK 8, you will also need to add <samp>$JAVA_HOME/bin</samp> to your <code>PATH</code>.
See the example in the next section.

</li><li> Optionally, set environment variable <code>BIBDIR</code> to a clone of
<a href="https://github.com/mernst/plume-bib">https://github.com/mernst/plume-bib</a>.


</li></ul>


<hr>
<span id="Distribution-setup-instructions"></span><div class="header">
<p>
Next: <a href="#Updating-dependencies" accesskey="n" rel="next">Updating dependencies</a>, Previous: <a href="#Directory-layout-requirements" accesskey="p" rel="prev">Directory layout requirements</a>, Up: <a href="#Distribution" accesskey="u" rel="up">Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Distribution-setup-instructions-1"></span><h3 class="section">7.2 Distribution setup instructions</h3>

<p>Get a fresh copy of your Bash shell (e.g., log out and log back in), then
run the following (adjust environment variables as necessary):
</p><div class="example">
<pre class="example">export DAIKONDIR=$inv/daikon
export JAVA_HOME=/usr/lib/jvm/java-1.8.0
export PATH=$JAVA_HOME/bin:$PATH
unset CHECKERFRAMEWORK
</pre></div>


<hr>
<span id="Updating-dependencies"></span><div class="header">
<p>
Next: <a href="#The-day-before-the-release" accesskey="n" rel="next">The day before the release</a>, Previous: <a href="#Distribution-setup-instructions" accesskey="p" rel="prev">Distribution setup instructions</a>, Up: <a href="#Distribution" accesskey="u" rel="up">Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Getting-the-latest-version-of-dependencies"></span><h3 class="section">7.3 Getting the latest version of dependencies</h3>

<p>Update the Daikon source files to their most recent version.
</p>
<div class="example">
<pre class="example">set -o pipefail
(cd $DAIKONDIR &amp;&amp; git pull &amp;&amp; git log --branches --not --remotes &amp;&amp; git status)
(cd $DAIKONDIR/../fjalar &amp;&amp; git pull &amp;&amp; git log --branches --not --remotes &amp;&amp; git status)
</pre></div>

<p>Each of the two commands should print exactly these lines:
</p>
<div class="example">
<pre class="example">Already up-to-date.
On branch master
Your branch is up-to-date with 'origin/master'.

nothing to commit, working directory clean
</pre></div>

<p>[Time: moments]
</p>
<p>The Fjalar tool set (primarily, Kvasir) is built upon, or uses pieces
from, two open source projects.
The home page for the Valgrind instrumentation framework is
<a href="https://valgrind.org">https://valgrind.org</a>.
The home page for the GNU Binutils
(a collection of binary tools, of which Kvasir uses only readelf) is
<a href="http://www.gnu.org/software/binutils/">http://www.gnu.org/software/binutils/</a>.
</p>
<p>File
<a href="https://raw.githubusercontent.com/codespecs/fjalar/master/valgrind/REVISION"><samp>$DAIKONDIR/fjalar/valgrind/REVISION</samp></a> indicates the version of
these tools that Kvasir uses.
You can determine whether a newer version of these tools is available
by comparing the <samp>REVISION</samp> file to
<a href="https://valgrind.org/downloads/current.html">https://valgrind.org/downloads/current.html</a> and
<a href="http://ftp.gnu.org/gnu/binutils/?C=M;O=D">http://ftp.gnu.org/gnu/binutils/?C=M;O=D</a>.
If so, you should update the Fjalar source tree as soon as practical.
For details, see the separate document &ldquo;Merging
newer versions of Valgrind into Fjalar&rdquo;, which appears
<a href="https://github.com/codespecs/fjalar/blob/master/doc/valgrind-merge.texinfo">in the <samp>fjalar</samp> repository</a>.
</p>

<hr>
<span id="The-day-before-the-release"></span><div class="header">
<p>
Next: <a href="#Distribution-steps" accesskey="n" rel="next">Distribution steps</a>, Previous: <a href="#Updating-dependencies" accesskey="p" rel="prev">Updating dependencies</a>, Up: <a href="#Distribution" accesskey="u" rel="up">Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="The-day-before-the-release-1"></span><h3 class="section">7.4 The day before the release</h3>

<p>Do these steps the day before the release, so that tests have time to
complete overnight.
</p>
<ul>
<li> Edit the <samp>doc/CHANGELOG.md</samp> file to indicate what has changed
in this version.  A good way to determine what has changed is to diff
the Texinfo source files in the <samp>doc/</samp> directory against the previous
versions:

<div class="example">
<pre class="example">cd $DAIKONDIR/doc
diff -b -u -s --from-file /cse/web/research/plse/daikon/download/doc *.texinfo
</pre></div>

<p>Another good source of information are the repository logs since the
last release:
</p>
<div class="example">
<pre class="example">cd $DAIKONDIR
DAIKONVERSION=`wget -q http://plse.cs.washington.edu/daikon/download/doc/VERSION \
    -O - | xargs echo -n`
git log v$DAIKONVERSION..HEAD
</pre></div>


<p>In addition, you should run the same command in your Fjalar clone:
</p>
<div class="example">
<pre class="example">cd $DAIKONDIR/fjalar
DAIKONVERSION=`wget -q http://plse.cs.washington.edu/daikon/download/doc/VERSION \
    -O - | xargs echo -n`
git log v$DAIKONVERSION..HEAD
</pre></div>

<p>When you have competed your updates, commit and push the changes.
</p>
<p>[Time: a few minutes]
</p>

</li><li> Check the release documents for spelling errors.

<div class="example">
<pre class="example">cd $DAIKONDIR/doc
make spell-check
</pre></div>

<p>Any words that may be spelled incorrectly are output to standard out.
</p>
<ul>
<li> If the word is misspelled, correct it in the source (<samp>.texinfo</samp>) file.

</li><li> If the word is spelled correctly and is a normal English word, add it to
<samp>daikon.dict</samp>, keeping the list in alphabetical order.

</li><li> If the word is spelled correctly and is a proper name, such as a person&rsquo;s
or company&rsquo;s name, then either add it to <samp>daikon.dict</samp> or
write <code>@nospellcheck</code> around it.

</li><li> If the word is technical information, such as part
of a computer command or filename, then mark it with a Texinfo command;
see &ldquo;Chapter 9: Marking Text,
Words and Phrases&rdquo; of the
GNU Texinfo Manual (<a href="http://www.gnu.org/software/texinfo/manual/texinfo/texinfo.pdf">PDF</a>,
<a href="https://www.gnu.org/software/texinfo/manual/texinfo/texinfo.html#Marking-Text">HTML</a>).

</li></ul>

<p>[Time: moments]
</p>
</li><li> Update dependencies in <samp>daikon/java/lib/</samp>.  For details, see <samp>daikon/java/lib/README</samp>.

</li></ul>

<p>TODO: it would be good to build the staging release the day before, too, so
that links can be fixed the day before the release or at least very early
in the process.
</p>

<hr>
<span id="Distribution-steps"></span><div class="header">
<p>
Previous: <a href="#The-day-before-the-release" accesskey="p" rel="prev">The day before the release</a>, Up: <a href="#Distribution" accesskey="u" rel="up">Distribution</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Steps-for-making-the-distribution"></span><h3 class="section">7.5 Steps for making the distribution</h3>

<ol>
<li> Verify that Daikon passes its tests.

<p>All of the jobs at <a href="https://dev.azure.com/mernstdaikon/daikon/_build">https://dev.azure.com/mernstdaikon/daikon/_build</a> should
pass (they should be green).  Here is a list of them:
</p>
<div class="example">
<pre class="example">

 <a href="https://dev.azure.com/mernstdaikon/daikon/_build/latest?definitionId=1&amp;branchName=master">https://dev.azure.com/mernstdaikon/daikon/_build/latest?definitionId=1&amp;branchName=master</a>
<img
src="https://dev.azure.com/mernstdaikon/daikon/_apis/build/status/codespecs.daikon?branchName=master"
alt="Azure Pipelines mernstdaikon/daikon status"/>

 <a href="https://dev.azure.com/mernstdaikon/daikon/_build/latest?definitionId=2&amp;branchName=master">https://dev.azure.com/mernstdaikon/daikon/_build/latest?definitionId=2&amp;branchName=master</a>
<img
src="https://dev.azure.com/mernstdaikon/daikon/_apis/build/status/codespecs.fjalar?branchName=master"
alt="Azure Pipelines mernstdaikon/fjalar status"/>
</pre></div>

<p>If any of the jobs is not passing, then correct the problem and wait for
the jobs to complete and pass.
The delay to wait for this to happen is a reason that you should avoid
making changes to Daikon on the release day.  Instead, you should make
changes the day before to permit the continuous integration jobs to run
overnight.
</p>

</li><li> Do a very clean rebuild of everything.

<div class="example">
<pre class="example">cd $DAIKONDIR &amp;&amp; make very-clean clean-kvasir &amp;&amp; make rebuild-everything
</pre></div>

<p>[Time: 20 min]
</p>

</li><li> Once you have successfully reached this point, you are ready to make a release
candidate and begin testing it.
The following command will verify that <samp>doc/CHANGELOG.md</samp> is up-to-date and then list
any uncommitted files.

<div class="example">
<pre class="example">make check-repo
</pre></div>

<p>The result of the command above should be:
</p>
<div class="example">
<pre class="example">On branch master
Your branch is up-to-date with 'origin/master'.
nothing to commit (use -u to show untracked files)
</pre></div>

<p>If the command output lists any files, they need to be
committed to the repository and pushed now.
In that case, you will need to return to step 1 and wait for the
CI jobs to complete.
</p>
<p>[Time: moments]
</p>

</li><li> Set the version number to an even number.
You may:
<ul>
<li> Manually edit file <samp>$DAIKONDIR/doc/VERSION</samp>, or
</li><li> If the revision number just needs to be incremented
by 1 (to go from odd to even) you may use:
<div class="example">
<pre class="example">make update-dist-version-file
</pre></div>
</li></ul>

<p>Note that if a new feature has been added, or if some change has made
the current version incompatible from the previous release (such as a
change in the dtrace file format or revised names for tool options),
then you should manually edit the VERSION file to increment the minor
version number and reset the revision number to zero.
</p>
<p>Optionally, override the distribution date (default: today) by
redefining the environment variable <code>TODAY</code>:
</p>
<div class="example">
<pre class="example">export TODAY='November 1, 2013'
</pre></div>

<p>Now, update the appropriate files with the date and version number
of the release and commit these changes back to the repository:
</p>
<div class="example">
<pre class="example">make update-run-google-java-format &amp;&amp; make update-and-commit-version
</pre></div>

<p>[Time: moments]
</p>

</li><li> It is important to build the release candidate from a clean enlistment.
(TODO: In the future, perhaps do all release-related work on a branch.
Otherwise, use of the below commands requires committing changes to master,
and there might be many commits if there is trouble with the release.)
This is to ensure we are testing only the files intended for release and
that those files are the same as a user would receive with a clone of
the repository. This needs to be done in a separate, new Bash command
shell.
The following commands get a fresh clone of Daikon, set some
environment variables and then
build everything to be distributed and copy it to the temporary staging area
(http://plse.cs.washington.edu/staging-daikon/).


<div class="example">
<pre class="example"># First, start a separate, new Bash command shell.  Don't kill your old one.

rm -rf /tmp/$USER/stage-daikon
mkdir -p /tmp/$USER/stage-daikon
cd /tmp/$USER/stage-daikon
git clone --depth 3 https://github.com/codespecs/daikon
cd daikon
export DAIKONDIR=`pwd`
export JAVA_HOME=/usr/lib/jvm/java-1.8.0
export PATH=$JAVA_HOME/bin:$PATH
unset CHECKERFRAMEWORK
make compile &amp;&amp; make staging
</pre></div>

<p>The final output of this command
will be a list of files that were added/removed since the
last release.
If any of these differences is unexpected, then investigate.
If any corrections are required, do so back in the main
repository, commit the changes, and
then repeat this step.
</p>
<p>[Time: 23 min]
</p>

</li><li> Next, check the staging website to see if it has any broken document links.

<div class="example">
<pre class="example">make check-for-broken-doc-links
</pre></div>

<p>Review <samp>checklink.log</samp> and make corrections as appropriate.
</p>
<p>Sometimes a website forbids robots, or artificially slows them.
This can lead to link-checking failures.
After you manually check a URL for correctness, you can add it to
<a href="https://github.com/plume-lib/html-tools/blob/master/html-valid-urls">https://github.com/plume-lib/html-tools/blob/master/html-valid-urls</a>
so that no warning is issued in the future.
</p>
<p>In some cases a &quot;403 Forbidden&quot; error is transient, due to the website
being down.  You can check such links by hand.
</p>
<p>If the URL is correct but cannot be checked (for example, because the website
prohibits spiders or because the URL  redirects to another URL but you prefer
to keep the first URL in your document), then you may need to add lines to
an appropriate part of file <samp>checklink-args.txt</samp> in
<a href="https://github.com/plume-lib/checklink">https://github.com/plume-lib/checklink</a>.
</p>
<p>In most cases (and for most 404 errors), you should fix the document with
the incorrect link.
Here is a workflow that may be used to deal with broken links:
</p><ul>
<li> Use the &lsquo;<samp>Wayback Machine</samp>&rsquo;, <a href="http://archive.org/web/">http://archive.org/web/</a>, and enter the URL.
</li><li> You will get a timeline.  Select a year and day, then you have to click on the time of day,
and then you get a version of the page at that time.
</li><li> Copy the URL from the address bar of your browser.
</li><li> If the web search is not successful, email the maintainer of the old content.
</li></ul>

<p>Note that you must fix problems in the original repository,
not in the drop directories. This means:
</p><ul>
<li> Switch back to your original Bash shell.
</li><li> Correct the file. (Most likely located beneath either
<samp>$DAIKONDIR/doc</samp> or
<samp>$BIBDIR</samp> (<samp>~/bib/</samp> if <samp>$BIBDIR</samp> is not set).)
</li><li> Commit the changes.
</li><li> Repeat the previous step to rebuild the release candidate.
</li><li> Repeat this step to verify your corrections.
</li></ul>

<p>If <samp>checklink.log</samp> contains an error message of the form:
</p><div class="example">
<pre class="example">List of broken links and other issues:
http://plse.cs.washington.edu/daikon/download/doc/developer/Requirements-for-compiling-Kvasir.html
  Line: 185
  Code: 200 OK
 To do: Some of the links to this resource point to broken URI fragments
        (such as index.html#fragment).
The following fragments need to be fixed:
        Requirements-for-compiling-Kvasir       Line: 185
</pre></div>
<p>This is probably caused by the way <code>makeinfo</code> deals with chapter splits via
indirect references through stub files.  Two <code>suppress-fragment</code> entries in
<samp>checklink-args.txt</samp> in <a href="https://github.com/plume-lib/checklink">https://github.com/plume-lib/checklink</a>
are required.  For the example above, these
would be:
</p><div class="example">
<pre class="example">--suppress-fragment http://plse.cs.washington.edu/daikon/download/doc/developer/\
Requirements-for-compiling-Kvasir.html#Requirements-for-compiling-Kvasir
--suppress-fragment http://plse.cs.washington.edu/staging-daikon/download/doc/developer/\
Requirements-for-compiling-Kvasir.html#Requirements-for-compiling-Kvasir
</pre></div>
<p>but on two long lines without any <code>\</code> line continuation characters.
</p>
<p>[Time: 8 min]
</p>

</li><li> Test the staged distribution on a 64-bit Rocky Linux machine.
Since the machine you are using to build the release is probably
such a machine, you may simply run the command below.  Success is indicated
by invariant output being written to the screen.

<div class="example">
<pre class="example">make test-staged-dist
</pre></div>

<p>[Time: 5 min]
</p>

</li><li> Test the distribution on Ubuntu and Mac OS machines.

<p>To use Azure Pipelines,
navigate to
<a href="https://dev.azure.com/mernstdaikon/daikon/_build?definitionId=3&amp;_a=summary">https://dev.azure.com/mernstdaikon/daikon/_build?definitionId=3&amp;_a=summary</a>
and click &ldquo;Run pipeline&rdquo; then &ldquo;Run&rdquo;.
</p>
<p>If there is a problem, fix it and start over.
</p>
<p>[Time: 15 min, or longer if the CI service is busy running other jobs for the codespecs organization.]
</p>

</li><li> Once you have successfully reached this point, you have a valid release candidate
and are ready to make the actual release.
<strong>Caution:</strong> If somewhere above you made a change to correct a problem you should have
restarted the release process.

<p>At this point we are done building and testing the release candidate and you
should exit the Bash command shell created in step 5 and return to your
original Bash shell.
</p>

</li><li> Update the website by deleting the current release
and then making the staged version the (new) current release.

<div class="example">
<pre class="example">cd $DAIKONDIR
make staging-to-www
</pre></div>

<p>[Time: 1 min]
</p>

</li><li> Add a version label to the repository:

<div class="example">
<pre class="example">cd $DAIKONDIR
DAIKONVERSION=`cat $DAIKONDIR/doc/VERSION | xargs echo -n`
git tag -a v$DAIKONVERSION -m $DAIKONVERSION
git push --tags
cd fjalar
git tag -a v$DAIKONVERSION -m $DAIKONVERSION
git push --tags
</pre></div>

<p>[Time: moments]
</p>

</li><li> At this point the distribution has been completed.
Bump the version number to an odd value for continuing development.

<div class="example">
<pre class="example">cd $DAIKONDIR
export -n TODAY
make update-dist-version-file
make update-doc-dist-date-and-version
</pre></div>

<p>[Time: moments]
</p>

</li><li> Verify these changes by doing product builds (no need to clean first) and
running a short verification test.

<div class="example">
<pre class="example">cd $DAIKONDIR
make rebuild-everything quick-test
</pre></div>

<p>Success is indicated by invariant output being written to the screen.
</p>
<p>[Time: 5 min]
</p>

</li><li> Commit changes back to the repository:

<div class="example">
<pre class="example">cd $DAIKONDIR
git commit -a -m &quot;Bump version number for ongoing development.&quot;
git push
cd fjalar
git commit -a -m &quot;Bump version number for ongoing development.&quot;
git push
</pre></div>

<p>[Time: moments]
</p>

</li><li> Send mail to the &lsquo;<samp>daikon-announce</samp>&rsquo; mailing list.
Use the suggested template below, replacing &lt;version number&gt; with
the actual number of the release.

<div class="example">
<pre class="example">&lt;to:&gt;  daikon-announce@googlegroups.com
&lt;subject:&gt;  Daikon version &lt;version number&gt; has been released

Daikon version &lt;version number&gt; is available at:
http://plse.cs.washington.edu/daikon/download/

Please see the entry from the doc/CHANGELOG.md file that appears below for more details.

  &lt;your name&gt;

&lt;a copy of the current entry from the doc/CHANGELOG.md file, with
paragraphs refilled (remove unnecessary line breaks that trim lines
to 80 columns for the CHANGELOG.md file but aren't desirable in email)&gt;
</pre></div>

<p>Note that if you use Microsoft Outlook 2010 or 2013 as your mailer,
by default it will insert hard breaks in your outgoing message. See
<a href="https://blog.techhit.com/551102-how-to-prevent-outlook-from-adding-line-breaks-to-sent-plain-text-messages">https://blog.techhit.com/551102-how-to-prevent-outlook-from-adding-line-breaks-to-sent-plain-text-messages</a>
for a work around.  You must quit and restart Outlook to activate
the change.
</p>
</li></ol>


<hr>
<span id="Historical"></span><div class="header">
<p>
Next: <a href="#File-formats" accesskey="n" rel="next">File formats</a>, Previous: <a href="#Distribution" accesskey="p" rel="prev">Distribution</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Analyzing-historical-versions-of-Daikon"></span><h2 class="chapter">8 Analyzing historical versions of Daikon</h2>

<span id="index-repository-1"></span>
<span id="index-Git-repository-1"></span>
<span id="index-Version-control-repository"></span>


<p>Daikon&rsquo;s version control repository, available at
<a href="https://github.com/codespecs/daikon">https://github.com/codespecs/daikon</a>, contains complete development
history starting from October 1, 2010, and partial development history
before that time.  The reason for this is that converting the full CVS
repository would create a repository that would be too
large for convenient use, and that would also be too large to upload to
Google Code or GitHub.  The original CVS repository is available for download from
<a href="http://plse.cs.washington.edu/daikon/download/inv-cvs/">http://plse.cs.washington.edu/daikon/download/inv-cvs/</a>, as files
<samp>inv-cvsaa</samp> through <samp>inv-cvsai</samp>.  Download
all 9 files, and then run the following commands to re-create the CVS
repository, which will be named <samp>invariants/</samp>:
</p>
<div class="example">
<pre class="example">cat inv-cvsa? &gt; inv-cvs-full.zip
unzip inv-cvs-full.zip
</pre></div>


<p>Developers can usually make do with the Git repository, which has
complete history for the Java source code.
</p>
<p>The CVS repository is most often used by researchers &mdash; for example, in
the testing community &mdash; because it contains both a CVS repository and
a set of tests that is more extensive than those in the Daikon
distribution.  If you are a researcher who uses the Daikon version
control history, please let us know of any publications so that we can
publicize them at
<a href="http://plse.cs.washington.edu/daikon/pubs/#daikon-testsubject">http://plse.cs.washington.edu/daikon/pubs/#daikon-testsubject</a>.
</p>
<p>The layout of the Daikon CVS repository differs slightly from that of
the distribution.  For example, the top-level directory is named
<samp>invariants/</samp> instead of <samp>daikon/</samp>.
</p>
<p>The remainder of this section points out some pitfalls for such
researchers.  Although
these problems are easy to avoid, some previous published work has made
these mistakes; don&rsquo;t let that happen to you!
</p>
<p>Recall that Daikon contains two sets of tests (see <a href="#Testing">Testing</a>); you
should include both in any analysis of Daikon&rsquo;s tests.
(Or, if you can analyze only one of the two sets of tests, then clearly
explain that the regression tests are the main tests.)
The regression tests use Makefiles to avoid re-doing unnecessary work,
so any description of the time taken to run Daikon&rsquo;s tests should be a
measurement of re-running the tests after they have been run once, not
running them from a clean checkout or after a <code>make clean</code> command.
</p>
<p>Daikon intentionally does not contain tests for third-party libraries
that are included (sometimes in source form) in the Daikon distribution.
As one example, the <samp>java/jtb/</samp> directory
contains an external library.  Therefore, any measurement of Daikon&rsquo;s code
coverage should not include such libraries, whether distributed in
source or as <samp>.jar</samp> files.
</p>
<p>Historically, the file <samp>doc/www/mit/index.html</samp> in the CVS repository
contains information about how Daikon&rsquo;s developers use Daikon.
This file changes from
time to time &mdash; for instance, it changed when a CVS branch was created
and later when development on it ceased (see <a href="#Branches">Branches</a>).
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Branches" accesskey="1">Branches</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Branches"></span><div class="header">
<p>
Up: <a href="#Historical" accesskey="u" rel="up">Historical</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Branches-1"></span><h3 class="section">8.1 Branches</h3>

<span id="index-branches_002c-in-CVS-repository"></span>

<p>The Daikon CVS repository contains two branches:  a main trunk and a
branch (named &lsquo;<samp>ENGINE_V2_PATCHES</samp>&rsquo;) for version 2 of Daikon.
</p>
<p>The CVS manual
(see section
<a href="https://web.archive.org/web/20140619100950/http://ximbiot.com/cvs/manual/cvs-1.11.23/cvs_5.html">&ldquo;Branching and merging&rdquo;</a> of the manual <em>CVS &mdash; Concurrent Versions System</em>)
describes CVS branches:
</p>
<blockquote>
<p>CVS allows you to isolate changes onto a separate line of development,
known as a <em>branch</em>.  When you change files on a branch, those changes
do not appear on the main trunk or other branches.
</p>
<p>Later you can move changes from one branch to another branch (or the
main trunk) by <em>merging</em>.  Merging involves first running
<code>cvs update -j</code>, to merge the changes into the working directory.
You can then commit that revision, and thus effectively copy the
changes onto another branch.
</p></blockquote>

<p>In early January 2002 (or perhaps in late 2001), we created the
&lsquo;<samp>ENGINE_V2_PATCHES</samp>&rsquo; branch at the <samp>invariants/java/daikon level</samp> of
the Daikon CVS repository.  Primary development continued along the CVS
branch &lsquo;<samp>ENGINE_V2_PATCHES</samp>&rsquo;, which we called
&ldquo;Daikon version 2&rdquo;  We
called the CVS trunk &ldquo;Daikon version 3&rdquo; it was experimental, and very
few people ran its code or performed development on it.  Periodically,
all changes made to the branch would be merged into the trunk, as one
large checkin on the trunk.  Later, development on version 3 became more
common, some changes were merged from the trunk to the branch, and
version 2 was finally retired (and no more changes were made to the
branch) in December 2003.
</p>
<p>A regular <code>cvs checkout</code> gets the trunk.  The <samp>-r</samp> flag specifies a
branch.  For example, to get the branch as of June 9, 2002, one could do
</p>
<div class="example">
<pre class="example">cvs -d $pag/projects/invariants/.CVS co -r ENGINE_V2_PATCHES \
    -D 2003/06/09 invariants/java/daikon
</pre></div>

<p>Some warnings about analyzing historical versions of Daikon:
</p><ol>
<li> When analyzing 2002 (and at least parts of 2003) you should be careful
to use the branch, not the trunk.  Or, you could analyze both (but as a
single development effort, not as separate efforts).
</li><li> When a programmer periodically merged changes from the branch to the
trunk (or vice versa), that operation resulted in very large checkins.
The times at which these merges occurred is indicated in file
<samp>invariants/java/daikon/merging.txt</samp> in the repository; for
example, this happened 34 times during calendar year 2002.  CVS checkins
for the branch properly attribute and time-stamp the work that appears
as a single large checkin on the trunk.
</li><li> There may be long periods of time in the branch (respectively, the
trunk) with no checkins, but that does not necessarily indicate a lacuna
in development, as checkins might have occurred in the meanwhile in the
trunk (respectively, the branch).
</li></ol>



<hr>
<span id="File-formats"></span><div class="header">
<p>
Next: <a href="#General-Index" accesskey="n" rel="next">General Index</a>, Previous: <a href="#Historical" accesskey="p" rel="prev">Historical</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="File-formats-1"></span><h2 class="appendix">Appendix A File formats</h2>

<span id="index-file-formats"></span>

<p>This chapter contains information about the file format of Daikon&rsquo;s
input files.  It is of most information to those who wish to write a
front end, also known as an instrumenter
(see <a href="daikon.html#Front-ends-and-instrumentation">Front ends and instrumentation</a> in <cite>Daikon User Manual</cite>).
A new front end enables Daikon to detect
invariants in another programming language.
</p>
<p>Daikon&rsquo;s input is conventionally one or more <samp>.dtrace</samp> data trace
files.  (Another, optional type of input file for Daikon is a <em>splitter</em>
info file; see <a href="daikon.html#Splitter-info-file-format">Splitter info file format</a> in <cite>Daikon User Manual</cite>.)
A trace file is a text file that consists of newline-separated
records.  There are two basic types of records that can appear in Daikon&rsquo;s
input:  program point declarations, and trace records.
The declarations describe the structure of the trace records.  The trace
records contain the data on which Daikon operates &mdash; the run-time
values of variables in your program.
</p>
<p>Each declaration names an instrumented program point and lists the
variables at that program point.  A program point is a location in the
program, such as a specific line number, or a specific procedure&rsquo;s entry or exit.
An instrumented program point is a place where the instrumenter may emit
a trace record.
A program point declaration
may be repeated, so long as the declarations match exactly (any
declarations after the first one have no effect).
</p>
<p>A data trace record (also known as a <em>sample</em>)
represents one execution of a program point.  The
record specifies the program point and gives the run-time values of each
variable.  The list of variables in the data trace record must be
identical to that in the corresponding declaration.  For a given program point,
the declaration must precede the first data trace record for the program
point.  It is not required that all the program point declarations
appear before any of the data trace records.
</p>
<p>There exist some other declaration-related records;
see <a href="#Declaration_002drelated-records">Declaration-related records</a>.
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Declarations-in-a-separate-file" accesskey="1">Declarations in a separate file</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Conventions" accesskey="2">Conventions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Declarations" accesskey="3">Declarations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Data-trace-records" accesskey="4">Data trace records</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Example-files" accesskey="5">Example files</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Version-1-Declarations" accesskey="6">Version 1 Declarations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr>
<span id="Declarations-in-a-separate-file"></span><div class="header">
<p>
Next: <a href="#Conventions" accesskey="n" rel="next">Conventions</a>, Up: <a href="#File-formats" accesskey="u" rel="up">File formats</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Declarations-in-a-separate-file-1"></span><h3 class="section">A.1 Declarations in a separate file</h3>


<p>Instead of placing both declarations and data trace records in a single
file, it is permitted to place the declarations in one or more
<samp>.decls</samp> <em>declaration files</em> while leaving the data trace records
in the <samp>.dtrace</samp> file.  This can be convenient for tools that
perform a separate instrumentation step, such as
<code>dfepl</code> (see <a href="daikon.html#dfepl">dfepl</a> in <cite>Daikon User Manual</cite>).
Such a tool takes as
input a target program to be analyzed, and produces two outputs:  a
<samp>.decls</samp> file and an instrumented program.  Executing the
instrumented program produces a <samp>.dtrace</samp> file containing data
trace records for all the program points that appear in the
<samp>.decls</samp> file.  This approach works fine and is easier to
implement in certain situations, but has a few disadvantages.  It
requires the user to perform at least two steps &mdash; instrumentation and
execution &mdash; and the existence of two versions of the program
(instrumented and uninstrumented) can lead to confusion or extra work.
It is also more convenient to have a single file that contains all
information about a program, rather than multiple <samp>.decls</samp> files
that must be associated with the <samp>.dtrace</samp> file.
</p>
<p>It is also permitted for a declaration to appear more than once in Daikon&rsquo;s
input.  The declaration must be identical in all occurrences.  This is
useful when running Daikon with multiple <samp>.dtrace</samp> files, each of
which contains its own declarations.
</p>

<hr>
<span id="Conventions"></span><div class="header">
<p>
Next: <a href="#Declarations" accesskey="n" rel="next">Declarations</a>, Previous: <a href="#Declarations-in-a-separate-file" accesskey="p" rel="prev">Declarations in a separate file</a>, Up: <a href="#File-formats" accesskey="u" rel="up">File formats</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="File-format-conventions"></span><h3 class="section">A.2 File format conventions</h3>


<p>Daikon files are textual, to permit easier viewing and editing by humans.
Each record is separated by one or more blank lines.
To permit easier parsing by programs, each piece of information in a record
appears on a separate line.
</p>
<p>Outside a record, any line starting with a pound sign (#) or double
slashes (//) is ignored as a comment.  Comments are not permitted
inside a record.
</p>
<hr>
<span id="Declarations"></span><div class="header">
<p>
Next: <a href="#Data-trace-records" accesskey="n" rel="next">Data trace records</a>, Previous: <a href="#Conventions" accesskey="p" rel="prev">Conventions</a>, Up: <a href="#File-formats" accesskey="u" rel="up">File formats</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Declarations-1"></span><h3 class="section">A.3 Declarations</h3>

<span id="index-declaration-format"></span>
<span id="index-_002edecls-file"></span>

<p>The trace file (or declaration file) first states the declaration file format
version number (see <a href="#Declaration-version">Declaration version</a>).
It may also specify some other information about the file
(see <a href="#Declaration_002drelated-records">Declaration-related records</a>).
Then, it defines each program point and its variables.
</p>
<p>Indentation is ignored, so it may be used to aid readability.
Fields with defaults can be omitted.
</p>
<p>As a rule, each line of the declaration file is of the form
<code>&lt;field-name&gt; &lt;field-value&gt;</code>.
</p>
<p>Some additional details about the declaration file format appear in file
<code>daikon/doc/decl_format.txt</code> in the Daikon source code.
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Declaration_002drelated-records" accesskey="1">Declaration-related records</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Program-point-declarations" accesskey="2">Program point declarations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Variable-declarations" accesskey="3">Variable declarations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr>
<span id="Declaration_002drelated-records"></span><div class="header">
<p>
Next: <a href="#Program-point-declarations" accesskey="n" rel="next">Program point declarations</a>, Up: <a href="#Declarations" accesskey="u" rel="up">Declarations</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Declaration_002drelated-records-1"></span><h4 class="subsection">A.3.1 Declaration-related records</h4>


<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Declaration-version" accesskey="1">Declaration version</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Input_002dlanguage-declaration" accesskey="2">Input-language declaration</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Variable-comparability" accesskey="3">Variable comparability</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#ListImplementors-declaration" accesskey="4">ListImplementors declaration</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Declaration-version"></span><div class="header">
<p>
Next: <a href="#Input_002dlanguage-declaration" accesskey="n" rel="next">Input-language declaration</a>, Up: <a href="#Declaration_002drelated-records" accesskey="u" rel="up">Declaration-related records</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Declaration-version-1"></span><h4 class="subsubsection">A.3.1.1 Declaration version</h4>

<p>The declaration version record must be the first record in the file.
</p>
<p>The declaration version record is as follows:
</p><div class="example">
<pre class="example">decl-version &lt;version&gt;
</pre></div>

<p>The current version is 2.0.
</p>
<p>Previous versions (see <a href="#Version-1-Declarations">Version 1 Declarations</a>) did not include a
version field and are identified by the lack of this field.
</p>

<hr>
<span id="Input_002dlanguage-declaration"></span><div class="header">
<p>
Next: <a href="#Variable-comparability" accesskey="n" rel="next">Variable comparability</a>, Previous: <a href="#Declaration-version" accesskey="p" rel="prev">Declaration version</a>, Up: <a href="#Declaration_002drelated-records" accesskey="u" rel="up">Declaration-related records</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Input_002dlanguage-declaration-1"></span><h4 class="subsubsection">A.3.1.2 Input-language declaration</h4>

<p>You can specify the language in which the program was written with a
record of the form
</p>
<div class="example">
<pre class="example">input-language &lt;language&gt;
</pre></div>

<p>The language string is arbitrary and is not used.
</p>

<hr>
<span id="Variable-comparability"></span><div class="header">
<p>
Next: <a href="#ListImplementors-declaration" accesskey="n" rel="next">ListImplementors declaration</a>, Previous: <a href="#Input_002dlanguage-declaration" accesskey="p" rel="prev">Input-language declaration</a>, Up: <a href="#Declaration_002drelated-records" accesskey="u" rel="up">Declaration-related records</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Variable-comparability-1"></span><h4 class="subsubsection">A.3.1.3 Variable comparability</h4>

<span id="index-comparability_002c-for-variables"></span>
<span id="index-variable-comparability"></span>
<span id="index-units-of-measurement_002c-see-variable-comparability"></span>

<p>The Variable comparability record indicates how the comparability field
of a variable declaration should be interpreted.
</p>
<p>Its format is:
</p><div class="example">
<pre class="example">var-comparability &lt;comparability-type&gt;
</pre></div>

<p>The possible values for <var>comparability-type</var> are <code>implicit</code> and
<code>none</code>.
</p>
<p><code>implicit</code> means ordinary comparability as described in
<a href="#Variable-declarations">Variable declarations</a>.  (The name <code>implicit</code> is retained
for historical reasons.)
</p>
<p>This record is optional.  The <code>implicit</code> type is the default.
</p>

<hr>
<span id="ListImplementors-declaration"></span><div class="header">
<p>
Previous: <a href="#Variable-comparability" accesskey="p" rel="prev">Variable comparability</a>, Up: <a href="#Declaration_002drelated-records" accesskey="u" rel="up">Declaration-related records</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="ListImplementors-declaration-1"></span><h4 class="subsubsection">A.3.1.4 ListImplementors declaration</h4>

<p>This declaration indicates classes that implement the
<code>java.util.List</code> interface, and should be treated as sequences
for the purposes of invariant detection.  The syntax is as follows:
</p>
<div class="example">
<pre class="example">ListImplementors
&lt;classname1&gt;
&lt;classname2&gt;
...
</pre></div>

<p>Each <code>classname</code> is in Java format (for example, <samp>java.util.LinkedList</samp>).
</p>
<p>The <samp>--list_type</samp> command-line option to Daikon can also be used to
specify classes that implement lists;
see <a href="daikon.html#Options-to-control-invariant-detection">Options to control invariant detection</a> in <cite>Daikon User Manual</cite>.
</p>


<hr>
<span id="Program-point-declarations"></span><div class="header">
<p>
Next: <a href="#Variable-declarations" accesskey="n" rel="next">Variable declarations</a>, Previous: <a href="#Declaration_002drelated-records" accesskey="p" rel="prev">Declaration-related records</a>, Up: <a href="#Declarations" accesskey="u" rel="up">Declarations</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Program-point-declarations-1"></span><h4 class="subsection">A.3.2 Program point declarations</h4>

<p>The format of a program point declaration is:
</p><div class="example">
<pre class="example">ppt &lt;ppt-name&gt;
&lt;ppt-info&gt;
&lt;ppt-info&gt;
...
&lt;variable-declaration&gt;
&lt;variable-declaration&gt;
...
</pre></div>

<p>The program point name can include any character.  In the declaration
file,
blanks must be replaced by <code>\_</code>, and backslashes must be escaped as <code>\\</code>.
Program point names must be distinct.
</p>

<p>While Daikon does not infer program point relationships from <code>ppt-name</code>s,
it does require these names to conform to a set syntax.
The following patterns are for the <code>enter</code>, <code>subexit</code>,
<code>class</code> and <code>object</code> <code>ppt-type</code>s, respectively.
</p>
<div class="example">
<pre class="example">&lt;fully qualified class name&gt;.&lt;method/function name&gt;(&lt;argument types&gt;):::ENTER
&lt;fully qualified class name&gt;.&lt;method/function name&gt;(&lt;argument types&gt;):::EXIT&lt;id&gt;
&lt;fully qualified class name&gt;:::CLASS
&lt;fully qualified class name&gt;:::OBJECT
</pre></div>

<p>Since in most languages a method or function may have multiple exit points,
the <code>ppt-name</code> for a <code>subexit</code> <code>ppt-type</code> must be appended
with a unique id.  Typically, this is the corresponding source line number.
</p>

<p>The following information about the program point (<code>ppt-info</code>) can be specified:
</p><ul>
<li> <code>ppt-type &lt;type&gt;</code>

<p>Specifies the <var>type</var> of the program point.  Possible program point
types are <code>point</code>, <code>class</code>, <code>object</code>, <code>enter</code>,
<code>exit</code>, <code>subexit</code>.  Except for <code>point</code> all of these
types are related to the program point hierarchy (see <a href="#Dataflow-hierarchy">Dataflow hierarchy</a>).
</p>
<p>A <code>point</code> program point is one that is <em>not</em> involved in a
program point hierarchy.   This is normally used when the input is not
from a programming language or when there is no dataflow hierarchy.
</p>
</li><li> <code>flags &lt;flags&gt;</code>

<p>Specifies one or more flags for this <code>ppt</code>.  The possible flags are:
<code>static</code>, <code>enter</code>, <code>exit</code>, <code>private</code>, <code>return</code>.
It should be noted that neither Daikon nor Kvasir currently use or
output this field.
</p>
</li><li> <code>parent &lt;relation-type&gt; &lt;parent-ppt-name&gt; &lt;relation-id&gt;</code>

<p>Specifies the program point hierarchy (<a href="#Dataflow-hierarchy">Dataflow hierarchy</a>).
</p>
<p>In particular, each <code>parent</code> field names one parent of this program
point.  A parent program point
is a point whose samples should include all of the samples at this
program point.  For example, an object program point is a parent of
each of the method program points in that object.
</p>
<p>The <var>relation-type</var> is the type of parent-child relationship in
the hierarchy. There are a few relationship types used internally
by Daikon, but the only one output to the data files is <code>parent</code>.
A <code>parent</code> relationship is one where the program points themselves
are explicitly related, such as an enter and an exit point.  All of the
variables at one of the points exists at the other.  A <code>user</code>
relation is one where a class is used at another point, such as at an
enter point.  For example, if a reference to class A were passed to
routine &lsquo;<samp>r1</samp>&rsquo;, the values found at enter and exit of &lsquo;<samp>r1</samp>&rsquo; could
be applied to
the class/object program point for A.  By default <code>user</code> relations
are not used because they can be recursive.
</p>
<p>The <var>relation-id</var> is a unique integer that identifies this parent
relation.  They are used when defining the specific parent
relations for variables.
</p>
<p>Multiple parent fields can be specified.
</p>
</li></ul>



<hr>
<span id="Variable-declarations"></span><div class="header">
<p>
Previous: <a href="#Program-point-declarations" accesskey="p" rel="prev">Program point declarations</a>, Up: <a href="#Declarations" accesskey="u" rel="up">Declarations</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Variable-declarations-1"></span><h4 class="subsection">A.3.3 Variable declarations</h4>
<span id="index-declaration-file-format"></span>

<p>The format of a variable declaration is:
</p><div class="example">
<pre class="example">variable &lt;name&gt;
  &lt;variable-info&gt;
  &lt;variable-info&gt;
  ...
</pre></div>

<p>The variable name is arbitrary, but for clarity, it should match what is
used in the programming language.  All characters are legal in a name,
but blanks must be represented as <code>\_</code> and backslashes as
<code>\\</code>.
</p>
<p>If the variable is an array, <code>..</code> marks the location of
array indices within the variable name.  Some examples of names are:
</p><div class="example">
<pre class="example">this.theArray
this.theArray[..]
this.stack.getClass()
</pre></div>

<p>The following information about the variable (<code>variable-info</code>)
can be specified:
</p><ul>
<li> <code>var-kind &lt;kind&gt; [&lt;relative-name&gt;]</code>

<p>Specifies the variable kind.  Possible values are: <code>field</code>,
<code>function</code>,
<code>array</code>, <code>variable</code>, <code>return</code>.  If <code>field</code> or
<code>function</code>
are specified, the relative name of the field or function must be
specified.  For example, if the variable is <code>this.theArray</code>, the
relative name is <code>theArray</code>.  Pointers to arrays are of type
<code>field</code>.  The arrays themselves (a sequence of values) are of
type <code>array</code>.  A var-kind entry is required in each variable block.
</p>
</li><li> <code>enclosing-var &lt;enclosing-var-name&gt;</code>

<p>The variable that contains this variable.  Required for fields and
arrays.  Required for functions that represent an instance method.
Forbidden for functions that specify a static method or a function in
a non-object-oriented language.
A variable is specified by its name.  The named variable must
be defined at the same program point.
If a variable is omitted (e.g., by the omit-var switch),
any variable for which it is the enclosing variable must be omitted as
well.
</p>
<p>For example, if the variable is <code>this.theArray</code>, the
enclosing variable is <code>this</code>.
</p>
</li><li> <code>reference-type pointer|offset</code>

<p>Specifies the kind of reference for variables which are structures or
classes.  The possible values are <code>pointer</code> or <code>offset</code>.  In
C, <code>pointer</code> is used if the variable is a pointer, <code>offset</code>
is used when the structure is placed inline.  Pointer would be used
for all references to Java objects.  Defaults to pointer.
</p>
</li><li> <code>array &lt;dim&gt;</code>

<p>The number of array dimensions inherited or declared by this variable.
The valid values are 0 or 1.  This should be specified for any variable
that has multiple values.  If not specified it defaults to 0.  Future
versions of Daikon may support more levels of arrays.
</p>
</li><li> <code>dec-type &lt;language-declaration&gt;</code>

<p>This is what the programmer used in the declaration of the variable.
Names for standard types should use Java&rsquo;s names (e.g., <code>int</code>,
<code>boolean</code>, <code>java.lang.String</code>, etc.),
but names for user-defined or language-specific
types can be arbitrary strings.  A <code>dec-type</code> entry is required in each
variable block.
</p>
</li><li> <code>rep-type &lt;daikon-type&gt;</code>

<p>This describes what will appear in the data
trace file.  For instance, the declared type might be <code>char[..]</code> but
the representation type might be <code>java.lang.String</code>.  Or, the declared
type might be <code>Object</code> but the representation type might be
<code>hashcode</code>, if the address of the object is written to the data trace
file.  A rep-type entry is required in each
variable block.
</p>
<span id="index-pointer-variables_002c-see-hashcode-type"></span>
<span id="index-hashcode-type_002c-for-variables"></span>

<p>The representation type should be one of <code>boolean</code>, <code>int</code>,
<code>hashcode</code>, <code>double</code>, or <code>java.lang.String</code>; or an
array of one of those (indicated by a <code>[..]</code> suffix).
</p>
<p><code>hashcode</code> is intended for unique object identifiers like memory
addresses (pointers) or the return value of Java&rsquo;s
<code>Object.hashCode</code> method.  <code>hashcode</code> is treated like
<code>int</code>, except that the hashcode values are considered uninteresting
for the purposes of output.  For example, Daikon will print
&lsquo;<samp><var>var</var> has only one value</samp>&rsquo; instead of &lsquo;<samp><var>var</var> == 0x38E8A</samp>&rsquo;.
</p>

</li><li> <code>flags &lt;flags&gt;</code>

<p>One or more flags may optionally be specified.  Possible values are:
</p><ul>
<li> <code>is_param</code>

<p>Indicates that a given variable is a parameter to a procedure.  Some
procedures reassign parameters &mdash; essentially using them as local
variables.  Such uses are not relevant to the procedure&rsquo;s external
specification.  The <code>is_param</code> flag causes Daikon not to print
certain invariants, if the variable has been reassigned.
</p>
<ol>
<li> Invariants
that use the parameter variable <code>p</code> in its post-state form are not
printed.
</li><li> Invariants that use fields of <code>p</code> (such as <code>p.x</code>)
are printed only if <code>p</code> has not changed.
</li><li> Some immutable
characteristics, such as the size of arrays and data types, are not
printed.  (These can change only if <code>p</code> is changed, but then, <code>p</code>
would no longer be interesting.)
</li></ol>

</li><li> <code>no_dups</code>

<p>Indicates that a collection can not contain duplicates.
If it cannot, Daikon does not check for some invariants that only have
meaning for collections that can contain duplicate elements.
</p>
</li><li> <code>not_ordered</code>

<p>Indicates that the order of a collection does not have meaning.  In
this case, Daikon does not check for element-wise comparisons between
it and other collections.
</p>
</li><li> <code>nomod</code>

<p>Indicates that the variable can never be modified.  For example, a
variable declared <code>static final</code> in Java.
</p>
</li><li> <code>synthetic</code>

<p>Indicates that the variable was added by the front end and is not
manifest in the input program.
</p>
</li><li> <code>classname</code>

<p>Indicates that the variable indicates the <code>classname</code> of its
enclosing variable.
</p>
</li><li> <code>to_string</code>

<p>Indicates that the variable is the string representation of its
enclosing variable.
</p>
</li><li> <code>non_null</code>

<p>Indicates that the variable can&rsquo;t take on a null value.  In this
case, Daikon will not check for the &lsquo;<samp>NonZero</samp>&rsquo; invariant.
</p>
</li><li> <code>is_property</code>

<p>Indicates that the variable is a C# property (set by the Celeriac front
end).  It is used in output
formatting to remove the parentheses from a method call.
</p>
</li><li> <code>is_enum</code>

<p>Indicates that the variable is an enumerated type (set by the Celeriac
front end).  Daikon uses this information to suppress obvious invariants.
</p>
</li><li> <code>is_readonly</code>

<p>Indicates that the variable is read only (set by the Celeriac front
end).  Daikon uses this information to suppress obvious invariants.
</p>
</li></ul>

</li><li> <code>comparability &lt;comparability-key&gt;</code>

<p>The <var>comparability-key</var> indicates which other variables are
comparable to this one.  The information specified here might have been
obtained dynamically, or via
type-inference-based static analysis, or in some other manner.
</p>
<p>A comparability for a non-array type is a signed integer.  Two
variables at the same program point are considered comparable if both
integers are the same, or if either integer is negative (that is, a
negative number means &ldquo;comparable to every other variable&rdquo;).  A
comparability for an array type contains an integer for each index
and for the contents; for instance, &lsquo;<samp>8[5]</samp>&rsquo; means that the array
elements have comparability &lsquo;<samp>8</samp>&rsquo; and the array indices have
comparability &lsquo;<samp>5</samp>&rsquo;.  Similarly, &lsquo;<samp>5[22][17]</samp>&rsquo; is a comparability for a
two-dimensional array.  An array comparison succeeds if comparisons over each
component succeed.
</p>
<p>Variables at different program points are never compared to one another.
Use of the same number at different program points does not indicate any
relationship between the variables, and a given variable may have a
different comparability integer at different program points.
</p>
<p>As an example, in the following code:
</p><div class="example">
<pre class="example">int sum(int len, int[] a) {
  int sum=0;
  for (int i=0; i++; i&lt;len)
    sum += a[i];
  return sum;
}
</pre></div>

<p>variables <code>i</code> and <code>len</code> are comparable to one another (and
to indices of array <code>a</code>).  Furthermore, the result is comparable
to the elements of array <code>a</code>.  The comparability keys for these
variables might look like
</p><div class="example">
<pre class="example">len     - comparability 5
a       - comparability 8[5]
return  - comparability 8
</pre></div>

<p>A comparability entry is required in each variable block.
</p>
</li><li> <code>parent &lt;parent-ppt&gt; &lt;relation-id&gt; [&lt;parent-variable&gt;]</code>

<p>Optionally specifies the parent variable of this variable in the program
point/variable hierarchy.  The <var>parent-ppt</var> is the name of the
parent program point.  The <var>relation-id</var> must be one of the
relationship ids specified for this program point.  The
<var>parent-variable</var> is the name of this variable&rsquo;s parent in the
parent program point.  If the names are the same, it can be omitted.
</p>
</li><li> <code>constant &lt;value&gt;</code>

<p>Optionally specifies a constant value for this variable.  If the variable has
a compile-time constant value that is specified in the declaration, then
the variable must be omitted from the data trace
records.
</p>
</li><li> <code>function-args &lt;arg1&gt; &lt;arg2&gt; ...</code>

<p>If this variable is computed as a function of some other variable,
specifies the arguments to the function; otherwise, the
<code>function-args</code> line must be omitted.
The arguments are specified by their
external variable name.  Multiple arguments are
blank separated.  For example
</p><div class="example">
<pre class="example">function-args a.b this.f1
</pre></div>

<p>specifies that the function takes two arguments which are <code>a.b</code> and
<code>this.f1</code>.  As with enclosing variables, each of the arguments must
be defined as variables.
</p>
</li><li> <code>min-value &lt;v&gt;</code>

<p>Optionally specifies the minimum possible value for this variable
(for instance, due to language-specific restrictions on the type). This
enables Daikon to suppress invariants that would be &ldquo;obvious&rdquo; in that
case, such as <code>var &gt;= v</code>.
</p>
</li><li> <code>max-value &lt;v&gt;</code>

<p>Optionally specifies the maximum possible value for this variable
(for instance, due to language-specific restrictions on the type). This
enables Daikon to suppress invariants that would be &ldquo;obvious&rdquo; in that
case, such as <code>var &lt;= v</code>.
</p>
</li><li> <code>min-length &lt;v&gt;</code>

<p>Optionally specifies the minimum possible length for this variable
(for instance, due to language-specific restrictions on the type). This
enables Daikon to suppress invariants that would be &ldquo;obvious&rdquo; in that
case, such as <code>size(var) &gt;= v</code>.
</p>
</li><li> <code>max-length &lt;v&gt;</code>

<p>Optionally specifies the maximum possible length for this variable
(for instance, due to language-specific restrictions on the type). This
enables Daikon to suppress invariants that would be &ldquo;obvious&rdquo; in that
case, such as <code>size(var) &lt;= v</code>.
</p>
</li><li> <code>valid-values [&lt;v1&gt; &lt;v2&gt; ... &lt;vN&gt;]</code>

<p>Optionally specifies all the possible values for this
variable (for instance, due to language-specific restrictions on the
type). This enables Daikon to suppress invariants that would be
&ldquo;obvious&rdquo; in that case, such as <code>v is one of {v1, v2, ..., vN}</code>.
</p>
</li></ul>


<hr>
<span id="Data-trace-records"></span><div class="header">
<p>
Next: <a href="#Example-files" accesskey="n" rel="next">Example files</a>, Previous: <a href="#Declarations" accesskey="p" rel="prev">Declarations</a>, Up: <a href="#File-formats" accesskey="u" rel="up">File formats</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Data-trace-records-1"></span><h3 class="section">A.4 Data trace records</h3>

<span id="index-data-trace-format"></span>
<span id="index-_002edtrace-file"></span>

<p>A data trace record (also known as a <em>sample</em>) contains run-time value
information.  Its format is:
</p><div class="example">
<pre class="example">&lt;program-point-name&gt;
this_invocation_nonce
&lt;nonce-string&gt;
&lt;varname-1&gt;
&lt;var-value-1&gt;
&lt;var-modified-1&gt;
&lt;varname2&gt;
&lt;var-value-2&gt;
&lt;var-modified-2&gt;
...
</pre></div>

<p>In other words, the sample record contains:
</p><ul>
<li> name of the program point

</li><li> optionally, an arbitrary string (a nonce) used to match up procedure
entries (whose names conventionally end with <code>:::ENTER</code>) with
procedure exits (whose names conventionally end with <code>:::EXIT</code>).
This is necessary in concurrent systems because there may
be several invocations of a procedure active at once and they do not
necessarily follow a stack discipline, being exited in the reverse order of
entry.  For non-concurrent systems, this nonce is not necessary, and
both the line <code>this_invocation_nonce</code> and the nonce value may be
omitted.



</li><li> for each variable:
<ul>
<li> name
</li><li> value
<ul>
<li> if an integer: sequence of digits, optionally preceded by a minus sign.
Boolean values are written as the number 0 (for false) or the number 1
(for true).  For pointers, the value may be <code>null</code>.
</li><li> if a string: characters surrounded by double-quotes.  Internal
double-quotes and backslashes are escaped by a backslash.  Newlines and
carriage returns are represented as &lsquo;<samp>\n</samp>&rsquo; and &lsquo;<samp>\r</samp>&rsquo;,
respectively.

</li><li> if an array: open bracket (<code>[</code>), elements separated by
spaces, close bracket (<code>]</code>).  (Also, the array name
should end in &lsquo;<samp>[..]</samp>&rsquo;; use &lsquo;<samp>a[..]</samp>&rsquo; for array contents,
but &lsquo;<samp>a</samp>&rsquo; for the identity of the array itself.)
</li></ul>

<span id="index-nonsensical-values-for-variables"></span>
<span id="index-missing-values-for-variables_002c-see-nonsensical-values"></span>

<p>The value representation may also be the string <code>nonsensical</code>;
see <a href="#Nonsensical-values">Nonsensical values</a>.
A string or array <em>value</em> is never <code>null</code>.  A <em>reference</em> to a
string or array may be <code>null</code>, in which case the string or array
value is printed as <code>nonsensical</code>.
</p>
</li><li> modified? (0, 1, or 2).
<span id="index-modified-bit"></span>
This value is 0 if the variable has not been assigned to since the
last time this program point was executed, and 1 if the variable has
been assigned to since then.  It is safe for an implementation to
always set it to 1.  It is also safe to always set it to 0, because
Daikon corrects obviously incorrect modification bits (such as 0 for a
never-before-seen value).

<p>The special value 2 should be used only (and always) when the value
field is <code>nonsensical</code>.
</p>
</li></ul>

<p>The variables should appear in the same order as they did in the
declaration of the program point, without omissions or additions.
</p></li></ul>

<span id="index-nonce_002c-invocation"></span>
<span id="index-this_005finvocation_005fnonce"></span>


<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Nonsensical-values" accesskey="1">Nonsensical values</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Variables-that-do-not-appear-in-trace-records" accesskey="2">Variables that do not appear in trace records</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Nonsensical-values"></span><div class="header">
<p>
Next: <a href="#Variables-that-do-not-appear-in-trace-records" accesskey="n" rel="next">Variables that do not appear in trace records</a>, Up: <a href="#Data-trace-records" accesskey="u" rel="up">Data trace records</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Nonsensical-values-for-variables"></span><h4 class="subsection">A.4.1 Nonsensical values for variables</h4>

<p>Some trace variables and derived variables may not have a value because
the expression that computes it cannot be evaluated.  In such a
circumstance, the value is said to be nonsensical, it is written in the
trace file as <code>nonsensical</code>, and its modified field must be 2.
Examples include
</p><ul>
<li> <code>x</code> when <code>x</code> is uninitialized or deallocated,
</li><li> <code>x.y</code> when <code>x</code> is null (or uninitialized or deallocated)
</li><li> <code>a[i]</code> when <code>i</code> is outside the bounds of <code>a</code> (or
uninitialized or deallocated, or <code>a</code> is null, uninitialized, or
deallocated)
</li></ul>

<p>For trace variables, it is the responsibility of the front end to
perform a check at run time whenever a variable&rsquo;s value is about to be
output to the trace, and to output the value &lsquo;<samp>nonsensical</samp>&rsquo;
(see <a href="#Nonsensical-values">Nonsensical values</a>) rather than crashing the program or
outputting an uninitialized or meaningless value.  (Determining when an
expression&rsquo;s value is meaningless is the most challenging part of
writing an instrumenter for a language like C, since it requires
tracking memory allocation and initialization.)  For derived variables
created by Daikon, Daikon does the same thing, setting values to
&lsquo;<samp>nonsensical</samp>&rsquo; when appropriate.  For controlling Daikon&rsquo;s output in
the presence of nonsensical values, see the
<samp>daikon.Daikon.guardNulls</samp> configuration option
(see <a href="daikon.html#General-configuration-options">General configuration options</a> in <cite>Daikon User Manual</cite>).
</p>

<hr>
<span id="Variables-that-do-not-appear-in-trace-records"></span><div class="header">
<p>
Previous: <a href="#Nonsensical-values" accesskey="p" rel="prev">Nonsensical values</a>, Up: <a href="#Data-trace-records" accesskey="u" rel="up">Data trace records</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Variables-that-do-not-appear-in-trace-records-1"></span><h4 class="subsection">A.4.2 Variables that do not appear in trace records</h4>

<p>A trace record should contain exactly the same variables as in the
corresponding declaration.  There is one exception:  for efficiency,
compile-time constants (e.g., static final variables in Java) are
omitted from the trace record, since they would have the same value
every time.
</p>
<p>Furthermore, neither the declarations nor the trace records contain derived
variables (see <a href="daikon.html#Variable-names">Variable names</a> in <cite>Daikon User Manual</cite>).
</p>


<hr>
<span id="Example-files"></span><div class="header">
<p>
Next: <a href="#Version-1-Declarations" accesskey="n" rel="next">Version 1 Declarations</a>, Previous: <a href="#Data-trace-records" accesskey="p" rel="prev">Data trace records</a>, Up: <a href="#File-formats" accesskey="u" rel="up">File formats</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Example-files-1"></span><h3 class="section">A.5 Example files</h3>

<p>Here are portions of two files <samp>StackArTester.decls</samp> and
<samp>StackArTester.dtrace</samp>, for a Java class that implements a stack of
integers using an array as the underlying data structure.  You can see
many more examples by simply running an existing front end on some Java,
C, or Perl programs and viewing the resulting files.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Example-declaration-file" accesskey="1">Example declaration file</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Example-data-trace-file" accesskey="2">Example data trace file</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr>
<span id="Example-declaration-file"></span><div class="header">
<p>
Next: <a href="#Example-data-trace-file" accesskey="n" rel="next">Example data trace file</a>, Up: <a href="#Example-files" accesskey="u" rel="up">Example files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Example-declaration-file-1"></span><h4 class="subsection">A.5.1 Example declaration file</h4>

<p>This is part of the file <samp>StackArTester.decls</samp>, a declaration file for
the <samp>StackAr.java</samp> program
(see <a href="daikon.html#StackAr-example">StackAr example</a> in <cite>Daikon User Manual</cite>).
</p>
<div class="example">
<pre class="example">ppt DataStructures.StackAr.push(java.lang.Object):::ENTER
ppt-type enter
parent parent DataStructures.StackAr:::OBJECT 1
variable this
  var-kind variable
  dec-type DataStructures.StackAr
  rep-type hashcode
  flags is_param nomod
  comparability 22
  parent DataStructures.StackAr:::OBJECT 1
variable this.theArray
  var-kind field theArray
  enclosing-var this
  dec-type java.lang.Object[]
  rep-type hashcode
  flags nomod
  comparability 22
  parent DataStructures.StackAr:::OBJECT 1
variable this.theArray.getClass().getName()
  var-kind function getClass().getName()
  enclosing-var this.theArray
  dec-type java.lang.Class
  rep-type java.lang.String
  function-args this.theArray
  flags nomod synthetic classname
  comparability 22
  parent DataStructures.StackAr:::OBJECT 1
variable this.theArray[..]
  var-kind array
  enclosing-var this.theArray
  array 1
  dec-type java.lang.Object[]
  rep-type hashcode[]
  flags nomod
  comparability 22
  parent DataStructures.StackAr:::OBJECT 1
variable this.theArray[..].getClass().getName()
  var-kind function getClass().getName()
  enclosing-var this.theArray[..]
  array 1
  dec-type java.lang.Class[]
  rep-type java.lang.String[]
  function-args this.theArray[]
  flags nomod synthetic classname
  comparability 22
  parent DataStructures.StackAr:::OBJECT 1
variable this.topOfStack
  var-kind field topOfStack
  enclosing-var this
  dec-type int
  rep-type int
  flags nomod
  comparability 22
  parent DataStructures.StackAr:::OBJECT 1
variable DataStructures.StackAr.DEFAULT_CAPACITY
  var-kind variable
  dec-type int
  rep-type int
  constant 10
  flags nomod
  comparability 22
  parent DataStructures.StackAr:::OBJECT 1
variable x
  var-kind variable
  dec-type java.lang.Object
  rep-type hashcode
  flags is_param nomod
  comparability 22
variable x.getClass().getName()
  var-kind function getClass().getName()
  enclosing-var x
  dec-type java.lang.Class
  rep-type java.lang.String
  function-args x
  flags nomod synthetic classname
  comparability 22

ppt DataStructures.StackAr.push(java.lang.Object):::EXIT103
ppt-type subexit
parent parent DataStructures.StackAr:::OBJECT 1
variable this
  var-kind variable
  dec-type DataStructures.StackAr
  rep-type hashcode
  flags is_param nomod
  comparability 22
  parent DataStructures.StackAr:::OBJECT 1
variable this.theArray
  var-kind field theArray
  enclosing-var this
  dec-type java.lang.Object[]
  rep-type hashcode
  flags nomod
  comparability 22
  parent DataStructures.StackAr:::OBJECT 1
variable this.theArray.getClass().getName()
  var-kind function getClass().getName()
  enclosing-var this.theArray
  dec-type java.lang.Class
  rep-type java.lang.String
  function-args this.theArray
  flags nomod synthetic classname
  comparability 22
  parent DataStructures.StackAr:::OBJECT 1
variable this.theArray[..]
  var-kind array
  enclosing-var this.theArray
  array 1
  dec-type java.lang.Object[]
  rep-type hashcode[]
  flags nomod
  comparability 22
  parent DataStructures.StackAr:::OBJECT 1
variable this.theArray[..].getClass().getName()
  var-kind function getClass().getName()
  enclosing-var this.theArray[..]
  array 1
  dec-type java.lang.Class[]
  rep-type java.lang.String[]
  function-args this.theArray[]
  flags nomod synthetic classname
  comparability 22
  parent DataStructures.StackAr:::OBJECT 1
variable this.topOfStack
  var-kind field topOfStack
  enclosing-var this
  dec-type int
  rep-type int
  flags nomod
  comparability 22
  parent DataStructures.StackAr:::OBJECT 1
variable DataStructures.StackAr.DEFAULT_CAPACITY
  var-kind variable
  dec-type int
  rep-type int
  constant 10
  flags nomod
  comparability 22
  parent DataStructures.StackAr:::OBJECT 1
variable x
  var-kind variable
  dec-type java.lang.Object
  rep-type hashcode
  flags is_param nomod
  comparability 22
variable x.getClass().getName()
  var-kind function getClass().getName()
  enclosing-var x
  dec-type java.lang.Class
  rep-type java.lang.String
  function-args x
  flags nomod synthetic classname
  comparability 22

ppt DataStructures.StackAr:::CLASS
ppt-type class
variable DataStructures.StackAr.DEFAULT_CAPACITY
  var-kind variable
  dec-type int
  rep-type int
  constant 10
  flags nomod
  comparability 22

ppt DataStructures.StackAr:::OBJECT
ppt-type object
parent parent DataStructures.StackAr:::CLASS 1
variable this
  var-kind variable
  dec-type DataStructures.StackAr
  rep-type hashcode
  flags is_param nomod
  comparability 22
variable this.theArray
  var-kind field theArray
  enclosing-var this
  dec-type java.lang.Object[]
  rep-type hashcode
  flags nomod
  comparability 22
variable this.theArray.getClass().getName()
  var-kind function getClass().getName()
  enclosing-var this.theArray
  dec-type java.lang.Class
  rep-type java.lang.String
  function-args this.theArray
  flags nomod synthetic classname
  comparability 22
variable this.theArray[..]
  var-kind array
  enclosing-var this.theArray
  array 1
  dec-type java.lang.Object[]
  rep-type hashcode[]
  flags nomod
  comparability 22
variable this.theArray[..].getClass().getName()
  var-kind function getClass().getName()
  enclosing-var this.theArray[..]
  array 1
  dec-type java.lang.Class[]
  rep-type java.lang.String[]
  function-args this.theArray[]
  flags nomod synthetic classname
  comparability 22
variable this.topOfStack
  var-kind field topOfStack
  enclosing-var this
  dec-type int
  rep-type int
  flags nomod
  comparability 22
variable DataStructures.StackAr.DEFAULT_CAPACITY
  var-kind variable
  dec-type int
  rep-type int
  constant 10
  flags nomod
  comparability 22
  parent DataStructures.StackAr:::CLASS 1
</pre></div>


<hr>
<span id="Example-data-trace-file"></span><div class="header">
<p>
Previous: <a href="#Example-declaration-file" accesskey="p" rel="prev">Example declaration file</a>, Up: <a href="#Example-files" accesskey="u" rel="up">Example files</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Example-data-trace-file-1"></span><h4 class="subsection">A.5.2 Example data trace file</h4>

<p>This is part of file <samp>StackArTester.dtrace</samp>, which you can create by
running the instrumented <samp>StackAr.java</samp> program
(see <a href="daikon.html#StackAr-example">StackAr example</a> in <cite>Daikon User Manual</cite>).
This excerpt contains only the
first two calls to
<code>push</code> and the first return from <code>push</code>, along with the
associated object program point records; omitted records are indicated
by ellipses.
</p>

<div class="example">
<pre class="example">

...

DataStructures.StackAr.push(java.lang.Object):::ENTER
this_invocation_nonce
104
this
812272602
1
this.theArray
312077835
1
this.theArray.getClass().getName()
&quot;java.lang.Object[]&quot;
1
this.theArray[..]
[null]
1
this.theArray[..].getClass().getName()
[null]
1
this.topOfStack
-1
1
x
1367164551
1
x.getClass().getName()
&quot;DataStructures.MyInteger&quot;
1

...

DataStructures.StackAr.push(java.lang.Object):::EXIT103
this_invocation_nonce
104
this
812272602
1
this.theArray
312077835
1
this.theArray.getClass().getName()
&quot;java.lang.Object[]&quot;
1
this.theArray[..]
[1367164551]
1
this.theArray[..].getClass().getName()
[&quot;DataStructures.MyInteger&quot;]
1
this.topOfStack
0
1
x
1367164551
1
x.getClass().getName()
&quot;DataStructures.MyInteger&quot;
1

...

DataStructures.StackAr.push(java.lang.Object):::ENTER
this_invocation_nonce
159
this
2007069404
1
this.theArray
142345952
1
this.theArray.getClass().getName()
&quot;java.lang.Object[]&quot;
1
this.theArray[..]
[null]
1
this.theArray[..].getClass().getName()
[null]
1
this.topOfStack
-1
1
x
111632506
1
x.getClass().getName()
&quot;DataStructures.MyInteger&quot;
1

...

DataStructures.StackAr.push(java.lang.Object):::EXIT103
this_invocation_nonce
159
this
2007069404
1
this.theArray
142345952
1
this.theArray.getClass().getName()
&quot;java.lang.Object[]&quot;
1
this.theArray[..]
[111632506]
1
this.theArray[..].getClass().getName()
[&quot;DataStructures.MyInteger&quot;]
1
this.topOfStack
0
1
x
111632506
1
x.getClass().getName()
&quot;DataStructures.MyInteger&quot;
1

...

</pre></div>


<hr>
<span id="Version-1-Declarations"></span><div class="header">
<p>
Previous: <a href="#Example-files" accesskey="p" rel="prev">Example files</a>, Up: <a href="#File-formats" accesskey="u" rel="up">File formats</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Version-1-Declarations-1"></span><h3 class="section">A.6 Version 1 Declarations</h3>

<span id="index-_002edecls-file-_0028version-1_0029"></span>

<p>This section describes the original version (1.0) of declaration
records.  These are now obsolete and should not be used.
</p>
<p>A declarations file can contain program point declarations,
<code>VarComparability</code> declarations, and <code>ListImplementors declarations</code>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#V1-Program-point-declarations" accesskey="1">V1 Program point declarations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#V1-pptname-format" accesskey="2">V1 pptname format</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#V1-VarComparability-declaration" accesskey="3">V1 VarComparability declaration</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#V1-ListImplementors-declaration" accesskey="4">V1 ListImplementors declaration</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="V1-Program-point-declarations"></span><div class="header">
<p>
Next: <a href="#V1-pptname-format" accesskey="n" rel="next">V1 pptname format</a>, Up: <a href="#Version-1-Declarations" accesskey="u" rel="up">Version 1 Declarations</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="V1-Program-point-declarations-1"></span><h4 class="subsection">A.6.1 V1 Program point declarations</h4>

<p>The format of a program point declaration is:
</p><div class="example">
<pre class="example">DECLARE
program-point-name
varname1
declared-type1 [# auxiliary-information1]
representation-type1 [= constant-value1]
comparable1
varname2
declared-type2 [# auxiliary-information2]
representation-type2 [= constant-value2]
comparable2
...
</pre></div>

<p>Program point information includes:
</p><ul>
<li> name (<em>tag</em>) of this program point, an arbitrary string containing no
tab or newline characters.  This name contains information such as the
class name or method name; what information is contained depends on
which instrumenter is being used.  See <a href="#V1-pptname-format">V1 pptname format</a>, for a full
specification of the naming format.


</li><li> for each variable:
<ul>
<li> name: a string containing no tabs or newlines.
See <a href="daikon.html#Variable-names">Variable names</a> in <cite>Daikon User Manual</cite>.

</li><li> declared type: this is what the programmer used in the declaration of
the variable.  Array types must be suffixed by the proper number of
&lsquo;<samp>[]</samp>&rsquo; to indicate their dimensionality.  Names for standard types
should use Java&rsquo;s names (e.g., <code>int</code>, <code>boolean</code>, etc.), but names for
user-defined or language-specific types can be arbitrary strings.

</li><li> auxiliary information: optionally, Daikon can be given information
about the meaning of the variable to help it better interpret the
values it later sees.  Information is provided as a comma-separated
list of items, with each item in the form of &lsquo;<samp>key = value</samp>&rsquo;.  Unrecognized
keys are silently ignored.  All values are
either &lsquo;<samp>true</samp>&rsquo; or &lsquo;<samp>false</samp>&rsquo;.  Mainly, this information is used for
collections, which are presented to Daikon as arrays.  Valid keys are:

<dl compact="compact">
<dt><code>hasDuplicates</code></dt>
<dd><p>Whether a collection can contain duplicates.  If it
cannot, Daikon does not check for some invariants that only have
meaning for collections that can contain duplicate elements.
</p>
</dd>
<dt><code>hasOrder</code></dt>
<dd><p>Whether order has meaning for a collection.  If order does
not have meaning in a collection, then Daikon does not check for
element-wise comparisons between it and other collections.
</p>
</dd>
<dt><code>hasNull</code></dt>
<dd><p>Whether zero has the special meaning null for the variable or
collection.  If it does, then Daikon checks for whether a value or the
elements in a collection are null.
</p>
</dd>
<dt><code>nullTerminated</code></dt>
<dd><p>Whether a collection has a value (usually null) that
ends its representation.  If it does, then Daikon looks at the
collection&rsquo;s size and at the collection&rsquo;s size-1 as &ldquo;interesting&rdquo;
values.  If it does not, then Daikon only looks at the collection&rsquo;s
size.
</p>
</dd>
<dt><code>isParam</code></dt>
<dd><p>Whether a given variable is a parameter to a method.  If a
variable is a parameter, Daikon avoids printing some information that
would be considered uninteresting for parameters.  First, invariants
that use the parameter variable <code>p</code> in its post-state form are not
printed.  Second, invariants that use fields of <code>p</code> (such as <code>p.x</code>)
are printed only if <code>p</code> has not changed.  Lastly, some immutable
characteristics, such as the size of arrays and data types are not
printed (both can be changed if <code>p</code> is changed, but then, <code>p</code>
would no longer be interesting).
</p>
</dd>
</dl>

</li><li> representation type:  this describes what will appear in the data
trace file.  For instance, the declared type might be <code>char[]</code> but
the representation type might be <code>java.lang.String</code>.  Or, the declared
type might be <code>Object</code> but the representation type might be
<code>hashcode</code>, if the address of the object is written to the data trace
file.

<p>The representation type should be one of <code>boolean</code>, <code>int</code>,
<code>hashcode</code>, <code>double</code>, or <code>java.lang.String</code>; or an
array of one of those (indicated by a <code>[]</code> suffix, as in Java).
Hashcodes are treated like integers, except that their actual values
are considered uninteresting for the purposes of output; they are
intended for unique object identifiers like memory addresses or the
return value of Java&rsquo;s <code>Object.hashCode</code> method.
</p>
<p>The representation type may optionally be followed by an equals
sign and a value; in that case, the variable is known to have a
compile-time constant value and should be omitted from the data
trace file.
</p></li></ul>
</li><li> <span id="index-comparability_002c-for-variables-_0028_002edecls-format-version-1_0029"></span>
<span id="index-variable-comparability-_0028_002edecls-format-version-1_0029"></span>
comparable variables.  This information indicates
which other variables are comparable to this one.

<p>The point of comparability is that Daikon should not compare unrelated
quantities.  For example, each person&rsquo;s height in centimeters may always
be less than their birth year, but it is not helpful for Daikon to
output &lsquo;<samp>height &lt; birthyear</samp>&rsquo;, because the two variables are measuring
incomparable quantities.  (In this case, the variables use different
units of measurement.)
</p>
<p>Variable comparability information helps Daikon to avoid computing
information over unrelated variables.  This saves time and (more
importantly) improves the quality of Daikon&rsquo;s output.  For more details,
see the paper
<a href="http://homes.cs.washington.edu/~mernst/pubs/invariants-relevance-icse2000-abstract.html">&ldquo;Quickly detecting relevant program invariants&rdquo;</a>.
</p>
<p>Variable comparability information may be obtained dynamically
(see <a href="daikon.html#Dynamic-abstract-type-inference-_0028DynComp_0029">Dynamic abstract type inference (DynComp)</a> in <cite>Daikon User Manual</cite>), via
type-inference based analysis, or in some other manner.  In any event,
Daikon reads it from the variable declarations.
</p>
<p>A comparability for a non-array type is a signed integer.  Two variables
at the same program point
are considered comparable if both integers are the same, <em>or</em> if either
integer is negative.
A comparability for an array type must contain an
integer for each index and for the contents; for instance, &lsquo;<samp>5[22][17]</samp>&rsquo;
for a two-dimensional array.  Comparisons succeed if comparisons over
each component succeed.
</p>
<p>Regardless of comparability, variables at different program points are
never compared to one another.  Use of the same comparability integer at
different program points does not indicate any
relationship between the variables, and a given variable may have a
different comparability integer at different program points.
</p>
<p>As an example, in the following code:
</p><div class="example">
<pre class="example">int sum(int len, int[] a) {
  int sum=0;
  for (int i=0; i++; i&lt;len)
    sum += a[i];
  return sum;
}
</pre></div>
<p>variables <code>i</code> and <code>len</code> are comparable to one another (and
to indices of array <code>a</code>).  Furthermore, the result is comparable
to the elements of array <code>a</code>.  A declaration file for these
variables might look like
</p><div class="example">
<pre class="example">len
int
int
5
a
int[]
int[]
8[5]
return
int
int
8
</pre></div>

</li></ul>


<hr>
<span id="V1-pptname-format"></span><div class="header">
<p>
Next: <a href="#V1-VarComparability-declaration" accesskey="n" rel="next">V1 VarComparability declaration</a>, Previous: <a href="#V1-Program-point-declarations" accesskey="p" rel="prev">V1 Program point declarations</a>, Up: <a href="#Version-1-Declarations" accesskey="u" rel="up">Version 1 Declarations</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Program-point-name-format-specification"></span><h4 class="subsection">A.6.2 Program point name format specification</h4>

<p>Instrumenting code creates a <samp>.decls</samp> file that contains program
point names such as:
</p>
<div class="example">
<pre class="example">DataStructures.StackAr.push(java.lang.Object):::ENTER
DataStructures.StackAr.push(java.lang.Object):::EXIT99
PolyCalc.RatNum.RatNum(int, int):::ENTER
PolyCalc.RatNum.RatNum(int, int):::EXIT55
PolyCalc.RatNum.RatNum(int, int):::EXIT67
</pre></div>

<p>This section describes the format of these program point names.  Someone
writing an instrumenter for a new language must be sure to follow this
format specification.
</p>
<p>A program point name is a string with no tabs or newlines in it.  The basic
format is &lsquo;<samp><var>topLevel</var>.<var>bottomLevel</var>:::<var>pptInfo</var></samp>&rsquo;.
For the first example given above, the top level of the hierarchy would
be <code>DataStructures.StackAr</code>, the bottom level would be
<code>push(java.lang.Object)</code>, and the
program point information would be <code>ENTER</code>.
</p>
<p><var>topLevel</var> may contain any number of periods (&lsquo;<samp>.</samp>&rsquo;). <var>bottomLevel</var>
and <var>pptInfo</var> may not contain any periods.  The string &lsquo;<samp>:::</samp>&rsquo; may only
appear once.
</p>
<p><var>topLevel</var> and <var>pptInfo</var> are required (i.e., they must be non-empty),
as are the period to the right of <var>topLevel</var> and the colons to the
left of <var>pptInfo</var>.  However, <var>bottomLevel</var> is optional.
</p>
<p>By convention, for Java <var>topLevel</var> consists of the class name, and
<var>bottomLevel</var> consists of the method name and method signature.
</p>
<p>For C, <var>topLevel</var> consists of a filename (or a single period for
global functions), and <var>bottomLevel</var>
could consist of a function name and signature.
More precisely, names of C program points follow these conventions:
</p>
<ul>
<li> Names of program points for file-static functions are prefixed with the name
of the source file, with &lsquo;<samp>.</samp>&rsquo; characters mapped to &lsquo;<samp>_</samp>&rsquo;,
followed by a &lsquo;<samp>.</samp>&rsquo;.

</li><li> Names of program points for
file-scope functions with external linkage are prefixed with &lsquo;<samp>..</samp>&rsquo;.
For example, a global function program point might be named
&lsquo;<samp>..main():::ENTER</samp>&rsquo;., the first period denoting that it is global in
scope and the second denoting the separator between the <var>toplevel</var>
and <var>bottomlevel</var> parts of the name.

</li><li> Names of C++ functions that are class or namespace members are prefixed
with the name(s) of their classes or namespaces, with the C++ &lsquo;<samp>::</samp>&rsquo;
syntax mapped onto the Java &lsquo;<samp>.</samp>&rsquo; syntax used by Daikon.
</li></ul>

<p>For an Input Output Automaton, <var>topLevel</var> consists of an Automaton name and
<var>bottomLevel</var> consists of information for a transition state.
</p>
<p>By convention, the entry and exit points for a function have names of
a special form so that they can be associated with one another.
(Currently, those names end with <code>:::ENTER</code> and <code>:::EXIT</code>.)  This
convention permits Daikon to generate pre-state variables
(see <a href="daikon.html#Variable-names">Variable names</a> in <cite>Daikon User Manual</cite>) automatically at
procedure exit points, so
front ends need not output them explicitly.  When there
are multiple exit points, then each one should be suffixed by a number
(such as a line number, for example, <code>foo::EXIT22</code>).  Daikon produces
the main (non-numbered) <code>:::EXIT</code> point automatically.  All the
numbered exits should contain the same set of variables; in general,
this means that local variables are not included at exit points.
Daikon requires that declarations for <code>:::ENTER</code> program
points appear before any declarations for matching <code>:::EXIT</code> program
points.
</p>
<p>Another convention is to have another program point whose
<var>bottomLevel</var> is empty and whose <var>pptInfo</var> is  <code>OBJECT</code>:
for example, <code>StackAr:::OBJECT</code>.  This contains the
representation invariant (sometimes called the object invariant) of a
class.  This program point is created automatically by Daikon; it need
not appear in a trace file.
</p>



<hr>
<span id="V1-VarComparability-declaration"></span><div class="header">
<p>
Next: <a href="#V1-ListImplementors-declaration" accesskey="n" rel="next">V1 ListImplementors declaration</a>, Previous: <a href="#V1-pptname-format" accesskey="p" rel="prev">V1 pptname format</a>, Up: <a href="#Version-1-Declarations" accesskey="u" rel="up">Version 1 Declarations</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="V1-VarComparability-declaration-1"></span><h4 class="subsection">A.6.3 V1 VarComparability declaration</h4>

<p>There is a special <code>VarComparability</code> declaration that controls how
the comparability field in program point declarations is interpreted.
The default <code>VarComparability</code> is <code>implicit</code>, which means
ordinary comparability as described in <a href="#Program-point-declarations">Program point declarations</a>.
(The name <code>implicit</code> is retained for historical reasons.)
You can override it as
follows:
</p><div class="example">
<pre class="example">VarComparability
none
</pre></div>

<p>As with all records in Daikon input files, a
blank line is required between this record and the next one.
</p>
<hr>
<span id="V1-ListImplementors-declaration"></span><div class="header">
<p>
Previous: <a href="#V1-VarComparability-declaration" accesskey="p" rel="prev">V1 VarComparability declaration</a>, Up: <a href="#Version-1-Declarations" accesskey="u" rel="up">Version 1 Declarations</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="V1-ListImplementors-declaration-1"></span><h4 class="subsection">A.6.4 V1 ListImplementors declaration</h4>

<p>This declaration indicates classes that implement the
<code>java.util.List</code> interface, and should be treated as sequences
for the purposes of invariant detection.  The syntax is as follows:
</p>
<div class="example">
<pre class="example">ListImplementors
&lt;classname1&gt;
&lt;classname2&gt;
...
</pre></div>

<p>Each <code>classname</code> is in Java format (for example, <samp>java.util.LinkedList</samp>).
</p>
<p>The <samp>--list_type</samp> command-line option to Daikon can also be used to
specify classes that implement lists; see <a href="daikon.html#Options-to-control-invariant-detection">Options to control invariant
detection</a> in <cite>Daikon User Manual</cite>.
</p>

<hr>
<span id="General-Index"></span><div class="header">
<p>
Previous: <a href="#File-formats" accesskey="p" rel="prev">File formats</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#General-Index" title="Index" rel="index">Index</a>]</p>
</div>
<span id="General-Index-1"></span><h2 class="unnumbered">General Index</h2>

<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#General-Index_cp_symbol-1"><b>.</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#General-Index_cp_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-J"><b>J</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-O"><b>O</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-V"><b>V</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-cp" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_symbol-1">.</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002edecls-file"><samp>.decls</samp> file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Declarations">Declarations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002edecls-file-_0028version-1_0029"><samp>.decls</samp> file (version 1)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Version-1-Declarations">Version 1 Declarations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002edtrace-file">.dtrace file</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Data-trace-records">Data trace records</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002ejpp-files">.jpp files</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Requirements-for-compiling-Daikon">Requirements for compiling Daikon</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-A">A</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-adding-new-derived-variables">adding new derived variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#New-derived-variables">New derived variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-adding-new-invariants">adding new invariants</a>:</td><td>&nbsp;</td><td valign="top"><a href="#New-invariants">New invariants</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-adding-new-output-formats">adding new output formats</a>:</td><td>&nbsp;</td><td valign="top"><a href="#New-formatting-for-invariants">New formatting for invariants</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-adding-new-regression-tests">adding new regression tests</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Adding-regression-tests">Adding regression tests</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-adding-new-suppressors">adding new suppressors</a>:</td><td>&nbsp;</td><td valign="top"><a href="#New-suppressors">New suppressors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-adding-new-unit-tests">adding new unit tests</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Unit-testing">Unit testing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-adding-track-logging">adding track logging</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Adding-track-logging">Adding track logging</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-B">B</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-branches_002c-in-CVS-repository">branches, in CVS repository</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Branches">Branches</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-C">C</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-C-programs_002c-instrumenting">C programs, instrumenting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instrumenting-C-programs">Instrumenting C programs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-changing-Daikon">changing Daikon</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extending-Daikon">Extending Daikon</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comparability_002c-for-variables">comparability, for variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variable-comparability">Variable comparability</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comparability_002c-for-variables-_0028_002edecls-format-version-1_0029">comparability, for variables (<samp>.decls</samp> format version 1)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#V1-Program-point-declarations">V1 Program point declarations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-compiling-Daikon">compiling Daikon</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Compiling-Daikon">Compiling Daikon</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-customizing-Daikon">customizing Daikon</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extending-Daikon">Extending Daikon</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-D">D</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Daikon-internals">Daikon internals</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Daikon-internals">Daikon internals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-data-trace-format">data trace format</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Data-trace-records">Data trace records</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dataflow-hierarchy">dataflow hierarchy</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Dataflow-hierarchy">Dataflow hierarchy</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-deallocated-pointers">deallocated pointers</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instrumenting-C-programs">Instrumenting C programs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-debugging-Daikon">debugging Daikon</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Debugging-Daikon">Debugging Daikon</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-declaration-file-format">declaration file format</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variable-declarations">Variable declarations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-declaration-format">declaration format</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Declarations">Declarations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-derived-variable">derived variable</a>:</td><td>&nbsp;</td><td valign="top"><a href="#New-derived-variables">New derived variables</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-E">E</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Eclipse">Eclipse</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Using-Eclipse">Using Eclipse</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-efficiency-issues">efficiency issues</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Daikon-internals">Daikon internals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-equality-optimization">equality optimization</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Equality-optimization">Equality optimization</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-extending-Daikon">extending Daikon</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extending-Daikon">Extending Daikon</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-F">F</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-file-formats">file formats</a>:</td><td>&nbsp;</td><td valign="top"><a href="#File-formats">File formats</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-front-end_002c-writing">front end, writing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#New-front-ends">New front ends</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-G">G</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Git-repository">Git repository</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Source-code-_0028version-control-repository_0029">Source code (version control repository)</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Git-repository-1">Git repository</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Historical">Historical</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-H">H</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-hashcode-type_002c-for-variables">hashcode type, for variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variable-declarations">Variable declarations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-hierarchy">hierarchy</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Dataflow-hierarchy">Dataflow hierarchy</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-I">I</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-instrumenting-C-programs">instrumenting C programs</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instrumenting-C-programs">Instrumenting C programs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-instrumenting-Java-programs">instrumenting Java programs</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Example-instrumented-Java-program">Example instrumented Java program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-invalid-values">invalid values</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instrumenting-C-programs">Instrumenting C programs</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-J">J</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Java-programs_002c-instrumenting">Java programs, instrumenting</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Example-instrumented-Java-program">Example instrumented Java program</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-jpp-files">jpp files</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Requirements-for-compiling-Daikon">Requirements for compiling Daikon</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-L">L</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-logging">logging</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Track-logging">Track logging</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-M">M</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-missing-values-for-variables_002c-see-nonsensical-values">missing values for variables, see nonsensical values</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Data-trace-records">Data trace records</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-modified-bit">modified bit</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Data-trace-records">Data trace records</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-modifying-Daikon">modifying Daikon</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Extending-Daikon">Extending Daikon</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-N">N</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-new-derived-variables">new derived variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#New-derived-variables">New derived variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-new-invariants">new invariants</a>:</td><td>&nbsp;</td><td valign="top"><a href="#New-invariants">New invariants</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-new-output-formats">new output formats</a>:</td><td>&nbsp;</td><td valign="top"><a href="#New-formatting-for-invariants">New formatting for invariants</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-new-regression-tests">new regression tests</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Adding-regression-tests">Adding regression tests</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-new-suppressors">new suppressors</a>:</td><td>&nbsp;</td><td valign="top"><a href="#New-suppressors">New suppressors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-new-unit-tests">new unit tests</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Unit-testing">Unit testing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-non_002dchecking-of-invariants">non-checking of invariants</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Avoiding-work-for-redundant-invariants">Avoiding work for redundant invariants</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-non_002dinstantiation-of-invariants">non-instantiation of invariants</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Avoiding-work-for-redundant-invariants">Avoiding work for redundant invariants</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-non_002dprinting-of-invariants">non-printing of invariants</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Avoiding-work-for-redundant-invariants">Avoiding work for redundant invariants</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nonce_002c-invocation">nonce, invocation</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Data-trace-records">Data trace records</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nonsensical-values">nonsensical values</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instrumenting-C-programs">Instrumenting C programs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nonsensical-values-for-variables">nonsensical values for variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Data-trace-records">Data trace records</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-O">O</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-optimizations">optimizations</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Daikon-internals">Daikon internals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-output-format_002c-defining-new">output format, defining new</a>:</td><td>&nbsp;</td><td valign="top"><a href="#New-formatting-for-invariants">New formatting for invariants</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-P">P</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-pointer-variables_002c-see-hashcode-type">pointer variables, see <em>hashcode</em> type</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variable-declarations">Variable declarations</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-R">R</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-regression-tests">regression tests</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Regression-tests">Regression tests</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-repository">repository</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Source-code-_0028version-control-repository_0029">Source code (version control repository)</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-repository-1">repository</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Historical">Historical</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-S">S</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-source-code">source code</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Source-code-_0028version-control-repository_0029">Source code (version control repository)</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-suppressors_002c-adding-new">suppressors, adding new</a>:</td><td>&nbsp;</td><td valign="top"><a href="#New-suppressors">New suppressors</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-T">T</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-testing-Daikon">testing Daikon</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Testing">Testing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-this_005finvocation_005fnonce">this_invocation_nonce</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Data-trace-records">Data trace records</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-track-log-output">track log output</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Track-log-output">Track log output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-track-logging">track logging</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Track-logging">Track logging</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-U">U</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-uninitialized-variables">uninitialized variables</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instrumenting-C-programs">Instrumenting C programs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-unit-testing">unit testing</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Unit-testing">Unit testing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-units-of-measurement_002c-see-variable-comparability">units of measurement, see variable comparability</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variable-comparability">Variable comparability</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="General-Index_cp_letter-V">V</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-valid-values">valid values</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Instrumenting-C-programs">Instrumenting C programs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variable-comparability">variable comparability</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Variable-comparability">Variable comparability</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variable-comparability-_0028_002edecls-format-version-1_0029">variable comparability (<samp>.decls</samp> format version 1)</a>:</td><td>&nbsp;</td><td valign="top"><a href="#V1-Program-point-declarations">V1 Program point declarations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variable_002c-derived">variable, derived</a>:</td><td>&nbsp;</td><td valign="top"><a href="#New-derived-variables">New derived variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-version-control-repository">version control repository</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Source-code-_0028version-control-repository_0029">Source code (version control repository)</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Version-control-repository">Version control repository</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Historical">Historical</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#General-Index_cp_symbol-1"><b>.</b></a>
 &nbsp; 
<br>
<a class="summary-letter" href="#General-Index_cp_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-J"><b>J</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-O"><b>O</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter" href="#General-Index_cp_letter-V"><b>V</b></a>
 &nbsp; 
</td></tr></table>


<hr>



</body>
</html>
